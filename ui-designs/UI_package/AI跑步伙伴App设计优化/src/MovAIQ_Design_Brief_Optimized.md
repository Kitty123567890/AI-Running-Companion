# 元气跑伴 (MovAIQ) - 优化版 Figma Make 设计提示词

## 一、项目核心定位

### 产品名称
**元气跑伴 (MovAIQ)** - AI智能跑步伙伴应用

### 设计哲学
**"隐于无形，动于有情"**
- **沉浸至上**：界面元素在需要时出现，不需要时消失，让用户专注于跑步本身
- **情感连接**：通过AI伙伴"哈特"建立持续的情感纽带，而非冷冰冰的数据工具
- **无界交互**：摒弃传统按钮框架，采用手势、长按、触控等更自然的交互方式

### 设计参考基准
1. **Apple Watch Workout** - 数据层级清晰、可读性强、深色主题下的视觉舒适度
2. **Nike Run Club** - 激励性视觉语言、动态效果、品牌色彩的大胆运用
3. **Strava** - 专业数据可视化、社区分享美学、路线地图的艺术化处理

---

## 二、视觉设计系统

### 2.1 色彩体系

#### 主色调（双主色策略）
- **元气粉 `#FF6B8B`**
  - 象征：活力、心跳、热情
  - 应用场景：哈特形象高能状态、完成目标高光、主要CTA按钮、数据达成高亮
  - 渐变延展：`#FF6B8B` → `#FF8FA3` (用于光晕、呼吸效果)

- **科技蓝 `#4A90E2`**
  - 象征：智能、可靠、科技感
  - 应用场景：路线规划、导航指引、冷静状态提示
  - 渐变延展：`#4A90E2` → `#5BA3F5` (用于地图高亮)

#### 背景体系（深色模式）
- **主背景**：`#000000` (纯黑) 或 `#0A0A0A` (极深炭黑)
- **次级层级**：`#1A1A1A` (深炭灰)
- **卡片/浮层**：`#2A2A2A` 至 `#363636` + 毛玻璃效果
  - 毛玻璃参数：`background: rgba(42, 42, 42, 0.7)` + `backdrop-filter: blur(20px)` + `border: 1px solid rgba(255, 255, 255, 0.1)`

#### 文字层级
- **一级信息（核心数据）**：`#FFFFFF` (纯白)
- **二级信息（说明文字）**：`#CCCCCC`
- **三级信息（辅助标签）**：`#999999`
- **禁用状态**：`#4D4D4D`

#### 功能色
- **成功/达成**：`#34C759` (Apple Green)
- **警示/超限**：`#FF3B30` (Apple Red)
- **警告/提醒**：`#FF9500` (Apple Orange)
- **中性/等待**：`#8E8E93` (Apple Gray)

#### 动态环境色
根据跑步时间段，背景渐变微调：
- **晨跑 (5:00-8:00)**：`#0A0A0A` → `#1A1520` (微带紫调)
- **日间 (8:00-17:00)**：`#0A0A0A` → `#151A1A` (微带青调)
- **夜跑 (17:00-22:00)**：`#0A0A0A` → `#1A1215` (微带暖调)
- **深夜 (22:00-5:00)**：`#000000` (纯黑无渐变)

---

### 2.2 字体系统

#### 字体家族
- **英文/数字**：SF Pro Display (优先) / SF Pro Rounded (用于哈特对话) / Inter (备选)
- **中文**：PingFang SC (优先) / HarmonyOS Sans SC (备选)

#### 字号与层级
| 层级 | 字号 | 字重 | 行高 | 用途 |
|------|------|------|------|------|
| **Display** | 72px | Bold | 1.0 | 里程碑数据（"5.0 KM"） |
| **H1** | 48px | Semibold | 1.1 | 页面主标题、核心数据 |
| **H2** | 32px | Semibold | 1.2 | 次级标题、模块标题 |
| **H3** | 24px | Medium | 1.3 | 卡片标题 |
| **Body Large** | 18px | Regular | 1.4 | 主要正文、哈特对话 |
| **Body** | 16px | Regular | 1.5 | 常规正文 |
| **Caption** | 14px | Regular | 1.4 | 说明文字、标签 |
| **Micro** | 12px | Medium | 1.3 | 极小标注 |

#### 数字特殊处理
- 核心跑步数据（时间、距离、配速）使用 **Tabular Numbers（等宽数字）**，确保数字跳动时布局不抖动
- 数字可选用 SF Pro Rounded 增加亲和力

---

### 2.3 图标系统

#### 风格定义
- **线性图标**为主，线条粗细统一 **2px**
- **圆角处理**：4px 圆角，保持柔和感
- **尺寸规范**：
  - 小图标：20×20px
  - 标准图标：24×24px
  - 大图标：32×32px
  - 特大图标（如设置入口）：40×40px

#### 图标库（使用 Lucide React）
- **跑步相关**：Activity, Navigation, MapPin, Route, TrendingUp
- **数据可视化**：BarChart, LineChart, PieChart, Clock, Zap
- **交互操作**：Play, Pause, Square (结束), MoreVertical, ChevronRight
- **社交分享**：Share2, Heart, Award, Trophy, Star
- **设置/工具**：Settings, User, Calendar, Target, Volume2

#### 动态图标
部分图标需要支持状态变化：
- **播放/暂停**：可切换状态
- **音量**：可根据音量高低显示不同图标
- **心率**：可有脉动动效

---

### 2.4 间距与布局系统

#### 间距基准单位：8px

| 名称 | 数值 | 用途 |
|------|------|------|
| **XXS** | 4px | 极小间距、图标与文字间距 |
| **XS** | 8px | 小间距、相关元素组间距 |
| **S** | 16px | 标准内边距、卡片内部间距 |
| **M** | 24px | 中等间距、段落间距 |
| **L** | 32px | 大间距、模块间距 |
| **XL** | 48px | 超大间距、页面上下留白 |
| **XXL** | 64px | 极大间距、特殊场景留白 |

#### 安全区域
- **顶部安全区**：44px（状态栏） + 16px（呼吸空间） = 60px
- **底部安全区**：34px（Home Indicator） + 16px（呼吸空间） = 50px
- **左右边距**：24px（标准内容区）

#### 卡片与容器圆角
- **小卡片**：12px
- **标准卡片**：16px
- **大卡片/模态框**：24px
- **全屏底部弹出**：顶部 32px，底部 0px

---

### 2.5 毛玻璃效果规范

#### 标准毛玻璃卡片
```css
background: rgba(42, 42, 42, 0.7);
backdrop-filter: blur(20px) saturate(150%);
border: 1px solid rgba(255, 255, 255, 0.08);
box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
```

#### 强毛玻璃（用于前景关键���容）
```css
background: rgba(26, 26, 26, 0.85);
backdrop-filter: blur(40px) saturate(180%);
border: 1px solid rgba(255, 255, 255, 0.12);
```

#### 轻毛玻璃（用于次要浮层）
```css
background: rgba(42, 42, 42, 0.5);
backdrop-filter: blur(12px) saturate(120%);
border: 1px solid rgba(255, 255, 255, 0.05);
```

---

## 三、核心角色设计：AI伙伴"哈特 (Hart)"

### 3.1 哈特设计理念与定位

#### 角色命名与核心概念
- **名称**：哈特 (Hart)，取自英文"Heart"的谐音
- **寓意**：核心、情感、生命力的象征
- **定位**：用户的情感投射对象与运动状态的视觉化仪表盘
- **核心机制**：哈特的状态直接、即时地反映用户的"元气值"水平

#### 设计目标
- **形象即功能**：一个会呼吸、跳动的心脏形象，直观反映健康状态
- **情感共鸣**：通过心脏的状态变化，激发用户的保护欲和责任感
- **可爱化处理**：避免医学解剖感，采用卡通化、Q版的心脏造型
- **与UI和谐**：深色背景下发光的心脏，既是视觉焦点又不违和

#### 形态设定：动态心脏形象

**基础造型**
- **主体形状**：经典心形（♥），但经过圆润化处理，去除尖锐棱角
- **尺寸规范**：
  - 首页/准备页：120×108px（宽×高，心形黄金比例1.1:1）
  - 跑步中页面：60×54px（缩小版）
  - 总结页庆祝：140×126px（放大版）
- **质感**：
  - 非写实的卡通风格，柔软、有弹性的果冻质感
  - 表面带有柔和的高光，暗示湿润、有生命力的状态
  - 半透明感，内部可见能量流动

**面部表情系统**
为了增强可爱度和拟人化，哈特心脏上有简单的面部特征：
- **眼睛**：两个圆点状眼睛（直径6px），位于心形上半部
  - 常态：黑色圆点
  - 开心：眯成月牙形
  - 疲惫：半闭的椭圆形
  - 濒危：X形或螺旋形
- **嘴巴**：一条简单的弧线（2px粗），位于眼睛下方
  - 微笑：上扬弧线
  - 平静：直线
  - 疲惫：下垂弧线
  - 痛苦：波浪状线条
- **表情动画**：眨眼（3-5秒一次）、嘴巴细微变化

**核心动画：心跳节奏**
所有哈特状态的基础动画都是"心跳"，通过不同的频率、幅度、节奏表现状态：
- **跳动实现**：Scale变化，从心形底部作为锚点
- **跳动模式**：双节拍（"咚-咚" 的节奏，像真实心跳）
  - 第一跳：scale(1.0 → 1.15 → 1.0)，duration 0.15s
  - 短暂停顿：0.05s
  - 第二跳：scale(1.0 → 1.10 → 1.0)，duration 0.12s
  - 长停顿：根据等级调整（0.5s - 3s）

---

### 3.2 元气值等级与哈特状态映射系统

#### Lv.5：元气爆棚 (90-100分)

**视觉状态**
- **形态**：饱满、圆润，心形边缘微微外扩，充满张力
- **颜色**：
  - 主体：鲜艳亮红色 `#FF2D55`（Apple红，充满活力）
  - 渐变：从 `#FF2D55` 到 `#FF6B8B`（中心到边缘）
- **光晕效果**：
  - 内层光晕：金色 `#FFD700`，半径20px，透明度40%
  - 外层光晕：粉红色 `#FF8FA3`，半径40px，透明度25%
  - 光晕呼吸：scale 1.0 ↔ 1.2，2秒循环
- **特殊装饰**：

  - 偶尔有星星闪烁（✨）粒子从心脏四周爆发
- **表情**：眼睛眯成开心的月牙形，嘴巴大弧度上扬（:D）

**动画效果**
- **跳动节奏**：强力且频繁
  - 双跳间隔：0.8秒（快速）
  - 第一跳幅度：scale 1.0 → 1.03
  - 第二跳幅度：scale 1.0 → 1.03
- **特殊动效**：整体轻微上下浮动（±6px，3秒循环）
- **脉冲光波**：每次跳动时，从心脏中心向外扩散一圈光波

**用户情绪引导**：成就感、愉悦、被鼓励

---

#### Lv.4：活力充沛 (70-89分)

**视觉状态**
- **形态**：健康饱满，正常心形比例
- **颜色**：
  - 主体：健康红色 `#FF3B30`（标准鲜红）
  - 渐变：轻微渐变，从 `#FF3B30` 到 `#FF6B8B`
- **光晕效果**：
  - 单层光晕：粉红色 `#FF8FA3`，半径25px，透明度30%
  - 光晕呼吸：scale 1.0 ↔ 1.1，2.5秒循环
- **特殊装饰**：
  - 偶尔有2-3个小光点闪现（每5秒一次）
  - 光点颜色：白色 `#FFFFFF`，大小4-8px
  - 光点动画：淡入淡出，位置随机
- **表情**：眼睛圆睁有神，嘴巴微笑上扬（:)）

**动画效果**
- **跳动节奏**：有力且规律
  - 双跳间隔：1.2秒（正常）
  - 第一跳幅度：scale 1.0 → 1.15
  - 第二跳幅度：scale 1.0 → 1.10
- **特殊动效**：轻微浮动（±4px，4秒循环）

**用户情绪引导**：满足、稳定、有动力

---

#### Lv.3：基础平稳 (40-69分)

**视觉状态**
- **形态**：正常心形，无特殊变化
- **颜色**：
  - 主体：正常暗红色 `#C7233A`（稍暗的红）
  - 无渐变，纯色填充
- **光晕效果**：
  - 极微弱光晕：`rgba(255, 107, 139, 0.15)`，半径15px
  - 光晕静态，无呼吸动画
- **特殊装饰**：无
- **表情**：眼睛正常睁开，嘴巴平直（:|）

**动画效果**
- **跳动节奏**：平缓规律
  - 双跳间隔：1.8秒（较慢）
  - 第一跳幅度：scale 1.0 → 1.12
  - 第二跳幅度：scale 1.0 → 1.08
- **特殊动效**：无浮动，仅跳动

**用户情绪引导**：平常心、维持状态

---

#### Lv.2：元气不足 (20-39分)

**视觉状态**
- **形态**：轻微萎缩，心形整体缩小5-8%
- **颜色**：
  - 主体：暗紫红色 `#8B1A1A`（失去光泽）
  - 边缘略微发灰，颜色不均匀
- **光晕效果**：无光晕
- **特殊装饰**：
  - 心脏表面出现1-2条细微的暗纹（深色线条）
  - 整体透明度降低至85%
- **表情**：眼睛半睁（疲惫状），嘴巴下垂（:(）

**动画效果**
- **跳动节奏**：微弱且不规律
  - 双跳间隔：不固定，2-3秒之间随机
  - 第一跳幅度：scale 1.0 → 1.08（无力）
  - 第二跳幅度：scale 1.0 → 1.05
  - 跳动不流畅，有轻微"卡顿"感
- **特殊动效**：轻微下沉感（向下偏移2px）

**用户情绪引导**：提醒、愧疚感、需要行动

---

#### Lv.1：垂头丧气 (1-19分)

**视觉状态**
- **形态**：明显干瘪萎缩，心形整体缩小15-20%
- **颜色**：
  - 主体：灰暗紫黑色 `#4A2424`（几乎无血色）
  - 边缘发黑，失去渐变
- **光晕效果**：无，甚至有轻微阴影
- **特殊装饰**：
  - **头顶乌云**：一片小型卡通乌云（灰色 `#666666`）
  - 乌云尺寸：40×24px，位于心脏上方8px
  - 乌云下方持续下小雨（3-5条细线，循环下落）
  - 雨滴颜色：浅蓝灰 `#8E8E93`，长度8-12px
  - 心脏表面有多条裂纹（深色不规则线条）
- **表情**：眼睛变成 X_X 或螺旋状，嘴巴波浪线（痛苦状）

**��画效果**
- **跳动节奏**：几乎停滞，偶尔抽搐
  - 双跳间隔：4-6秒（极慢）
  - 跳动幅度：scale 1.0 → 1.04（微弱抽搐）
  - 只有单跳，无双节拍
  - 跳动后有"无力"感，略微下坠
- **特殊动效**：
  - 整体微微抖动（±1px 随机震颤）
  - 持续下沉倾向

**用户情绪引导**：警示、危机感、急需改变

---

#### Lv.0：病变/濒危 (0分或连续多日未运动)

**视觉状态**
- **形态**：极度萎缩，心形缩小25-30%，边缘不规则
- **颜色**：
  - 主体：死寂的深灰黑色 `#2C2C2C`（几乎无色彩）
  - 整体去饱和，接近黑白
- **光晕效果**：无，有明显阴影投射
- **特殊装饰**：
  - **厚重乌云**：大型深色乌云（黑灰 `#3A3A3A`）
  - 乌云尺寸：80×48px，完全覆盖心脏上方
  - **闪电**：乌云中闪烁的黄色闪电（`#FF9500`）
  - 闪电动画：每2-3秒闪烁一次，持续0.2s
  - **绷带**：心脏表面缠绕白色绷带（交叉绑法）
  - 绷带颜色：`#F5F5F5`，带阴影，部分区域有红色血迹（`#8B0000`）
  - 绷带宽度：8px，交叉2-3圈
  - **裂纹**：心脏表面有明显的深色裂纹网络
- **表情**：眼睛完全闭合或变成 X_X，嘴巴开口（O 形，濒死状）

**动画效果**
- **跳动节奏**：停止跳动或极偶尔微弱跳动
  - 大部分时间：完全静止（0跳动）
  - 偶尔（每10-15秒）：微弱抽搐一次，scale 1.0 → 1.02
- **特殊动效**：
  - 持续剧烈抖动（±2px 随机震颤）
  - 整体暗淡，透明度60%
  - 闪电击中时，心脏短暂闪白（0.1s）

**用户情绪引导**：强烈警示、激发保护欲、紧迫感

---

### 3.3 哈特特殊场景动画库

除了常驻的元气值状态，哈特在特定交互场景下会触发特殊动画。

#### 1. 苏醒动画（初始页点击触发）

**适用场景**：从 Lv.0/Lv.1 状态进入App时

**动画序列**（总时长2.5秒）
1. **0-0.5s**：心脏微微震动（±3px 抖动）
2. **0.5-1.0s**：
   - 乌云逐渐上升消散（translateY -50px, opacity 0）
   - 绷带逐渐解开并飘走（旋转 + 淡出）
   - 裂纹逐渐愈合消失
3. **1.0-1.5s**：
   - 心脏颜色从灰黑逐渐变红（颜色过渡动画）
   - 心脏尺寸从萎缩恢复到正常（scale 0.7 → 1.0）
   - 开始第一次跳动（微弱）
4. **1.5-2.0s**：
   - 眼睛睁开（从闭合到睁开）
   - 光晕逐渐出现
   - 跳动变得规律
5. **2.0-2.5s**：
   - 整体向上跳跃一次（translateY -20px，带弹性效果）
   - 周围爆发小光粒子（10-15个白色粒子向外扩散）
   - 表情变为微笑

---

#### 2. 鼓励动画（跑步中双击触发）

**适用场景**：用户在跑步中需要激励

**动画序列**（总时长1.5秒）
1. **0-0.3s**：心脏快速连跳3次（强力跳动）
2. **0.3-0.8s**：
   - 心脏向上跳起（translateY -30px）
   - 同时放大（scale 1.2）
   - 周围爆发星星粒子（15-20个金色星星）
3. **0.8-1.2s**：
   - 心脏在空中旋转一圈（rotate 360deg）
   - 表情变为超级开心（^_^）
4. **1.2-1.5s**：
   - 心脏落回原位（ease-out 缓动）
   - 粒子消散
   - 伴随AI气泡出现："加油加油！你超棒的！💪"

---

#### 3. 庆祝动画（完成跑步）

**适用场景**：成功完成一次跑步目标

**动画序列**（总时长3秒）
1. **0-0.5s**：心脏剧烈跳动（快速双跳3组）
2. **0.5-1.5s**：
   - 心脏连续跳跃3次，高度递增
     - 第1跳：translateY -25px
     - 第2跳：translateY -40px
     - 第3跳：translateY -60px
   - 每次跳跃都伴随粒子爆发
3. **1.5-2.0s**：
   - 心脏达到最高点时，瞬间升级到 Lv.5 状态
   - 金色光晕爆发（从中心向外扩散）
   - 大量彩色粒子（金色 + 粉色）如烟花般绽放
4. **2.0-3.0s**：
   - 心脏缓慢落回（带bounce效果）
   - 周围音符开始环绕旋转
   - 表情：大笑状（:D），眼睛闪光

---

#### 4. 思考动画（目的地输入时）

**适用场景**：用户输入目的地，等待AI规划路线

**动画序列**（循环直到输入完成）
1. **头顶出现思考泡泡**：
   - 一个白色圆形泡泡（40×40px），位于心脏上方
   - 泡泡内有三个小点"..."
2. **小点动画**（循环）：
   - 三个点依次放大缩小（scale 1.0 ↔ 1.3）
   - 循环周期：1.2秒
3. **心脏动作**：
   - 眼睛向上看（瞳孔移动）
   - 轻微左右摇摆（rotate -5deg ↔ 5deg，2秒循环）
   - 跳动节奏正常但缓慢

---

#### 5. 点击反馈动画（首页点击哈特）

**适用场景**：用户点击哈特查看元气值详情

**动画序列**（总时长0.6秒）
1. **0-0.2s**：
   - 心脏被"压扁"（Squash & Stretch 效果）
   - 垂直方向：scale(1.0, 0.85)
   - 水平方向：scale(1.15, 1.0)
2. **0.2-0.4s**：
   - 心脏反弹恢复并超出（scale 1.1）
   - 发出一圈波纹（圆形扩散，粉色边框，透明度 0.6 → 0）
3. **0.4-0.6s**：
   - 心脏回到正常大小（scale 1.0）
   - 做一个俏皮眨眼（;)）

---

#### 6. 受伤/失望动画（未完成目标）

**适用场景**：用户未完成既定跑步目标

**动画序列**（总时长2秒）
1. **0-0.5s**：
   - 心脏跳动突然减缓并停止
   - 颜色快速变暗（当前颜色 → 降一级颜色）
2. **0.5-1.0s**：
   - 心脏轻微缩小（scale 0.95）
   - 表面出现一条新裂纹（深色线条从上到下绘制）
   - 表��变为难过（T_T），眼角有小泪珠
3. **1.0-1.5s**：
   - 头顶出现小乌云（根据新等级）
   - 乌云从无到有淡入
4. **1.5-2.0s**：
   - 心脏低头（轻微向下倾斜 rotate -10deg）
   - 整体下沉（translateY +5px）
   - AI气泡："没关系，下次我们一起加油！💪"

---

### 3.4 哈特与UI的融合设计

#### 尺寸与位置规范

| 页面 | 尺寸 | 位置 | 状态 | 交互 |
|------|------|------|------|------|
| **初始页** | 100×90px | 绝对居中 | Lv.0/Lv.1（沉睡） | 点击触发苏醒 |
| **首页** | 140×126px | 中心偏上（-10%） | 根据当前元气值 | 点击显示详情 |
| **模式选择** | 80×72px | 顶部居中 | 期待/准备状态 | 无交互 |
| **跑步中** | 60×54px | 左上角或右上角 | 实时跟随状态变化 | 点击快速鼓励 |
| **总结页** | 140×126px | 顶部中心 | Lv.5（庆祝） | 无交互，播放庆祝动画 |

#### 色彩协调原则
- **深色背景下的对比**：心脏本身为暖色（红色系），与冷色深色背景形成强烈对比
- **光晕融入**：光晕使用毛玻璃效果，与UI卡片的毛玻璃呼应
- **装饰元素统一**：乌云、闪电、音符等装饰元素采用扁平化设计，与UI图标风格一致

#### 动画性能优化
- **使用CSS Transform**：所有动画优先使用 `transform` 和 `opacity`，避免触发layout
- **GPU加速**：对哈特元素应用 `will-change: transform`
- **粒子系统**：使用 Canvas 或 WebGL 渲染粒子，避免DOM元素过多
- **帧率控制**：心跳动画锁定60fps，确保流畅

---

### 3.5 哈特语音气泡设计

（该部分保持之前的设计，气泡样式、动画、位置规则等与哈特心脏形象配合）

#### 气泡样式
- **形状**：圆角矩形（16px圆角）+ 小三角指向哈特
- **背景**：轻毛玻璃效果 `rgba(42, 42, 42, 0.9)` + `blur(20px)`
- **边框**：`1px solid rgba(255, 255, 255, 0.15)`
- **内边距**：16px 横向，12px 纵向
- **最大宽度**：屏幕宽度的 70%
- **文字**：Body Large (18px)，颜色 `#FFFFFF`

#### 气泡动画
- **入场**：从哈特位置放大淡入 (scale 0.8 → 1.0, opacity 0 → 1, 0.3s ease-out)
- **停留**：3-5秒（根据文字长度自动调整）
- **出场**：向上移动淡出 (translateY 0 → -20px, opacity 1 → 0, 0.3s ease-in)

#### 气泡内容根据哈特状态变化

| 哈特等级 | 典型气泡内容 |
|---------|-------------|
| **Lv.5** | "你简直太棒了！继续保持！🌟" |
| **Lv.4** | "感觉状态不错哦！💪" |
| **Lv.3** | "让我们一起跑起来吧～" |
| **Lv.2** | "好久没运动了，我有点担心你呢..." |
| **Lv.1** | "我快要撑不住了...救救我😢" |
| **Lv.0** | "我...我需要你..." |

### 3.6 哈特技术实现建议

#### SVG 实现方案

**心形路径定义**
```svg
<svg width="120" height="108" viewBox="0 0 120 108">
  <defs>
    <!-- 渐变定义 -->
    <linearGradient id="heartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#FF2D55" />
      <stop offset="100%" stop-color="#FF6B8B" />
    </linearGradient>
    
    <!-- 光晕滤镜 -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- 心形主体（使用贝塞尔曲线） -->
  <path id="heart" 
    d="M60,25 
       C60,15 50,8 40,8 
       C25,8 15,20 15,32 
       C15,50 35,68 60,95
       C85,68 105,50 105,32
       C105,20 95,8 80,8
       C70,8 60,15 60,25 Z"
    fill="url(#heartGradient)"
    filter="url(#glow)"
  />
  
  <!-- 眼睛（组件化，可复用） -->
  <circle cx="45" cy="35" r="3" fill="#000000" />
  <circle cx="75" cy="35" r="3" fill="#000000" />
  
  <!-- 嘴巴（使用path，可变形） -->
  <path d="M 45,45 Q 60,50 75,45" 
    stroke="#000000" 
    stroke-width="2" 
    fill="none" 
    stroke-linecap="round"
  />
</svg>
```

**动画实现（使用 Motion/Framer Motion）**
```tsx
import { motion } from 'motion/react';

const Hart = ({ level }: { level: 0 | 1 | 2 | 3 | 4 | 5 }) => {
  // 根据等级计算动画参数
  const heartbeatInterval = [6, 4, 1.8, 1.2, 0.8][level];
  const scaleAmplitude = [1.02, 1.04, 1.08, 1.12, 1.15, 1.18][level];
  
  return (
    <motion.div
      className="hart-container"
      animate={{
        scale: [1, scaleAmplitude, 1, scaleAmplitude * 0.85, 1],
      }}
      transition={{
        duration: 0.4,
        times: [0, 0.15, 0.20, 0.32, 0.40],
        repeat: Infinity,
        repeatDelay: heartbeatInterval,
        ease: "easeInOut"
      }}
    >
      {/* SVG心形 */}
      {/* 眼睛、嘴巴、装饰元素 */}
    </motion.div>
  );
};
```

#### 粒子系统实现（Canvas）

用于庆祝、鼓励等场景的粒子效果：
```tsx
// 粒子类
class Particle {
  x: number;
  y: number;
  vx: number;
  vy: number;
  life: number;
  color: string;
  size: number;
  
  constructor(x: number, y: number) {
    this.x = x;
    this.y = y;
    this.vx = (Math.random() - 0.5) * 8;
    this.vy = (Math.random() - 0.5) * 8 - 2;
    this.life = 1.0;
    this.color = Math.random() > 0.5 ? '#FFD700' : '#FF8FA3';
    this.size = Math.random() * 4 + 2;
  }
  
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.1; // 重力
    this.life -= 0.01;
  }
  
  draw(ctx: CanvasRenderingContext2D) {
    ctx.globalAlpha = this.life;
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}
```

#### 组件结构建议
```
/components
  /hart
    ├── Hart.tsx                 # 主组件
    ├── HartSVG.tsx             # SVG图形
    ├── HartFace.tsx            # 表情系统（眼睛、嘴巴）
    ├── HartDecorations.tsx     # 装饰元素（乌云、闪电、音符）
    ├── HartParticles.tsx       # 粒子效果
    ├── HartAnimations.ts       # 动画配置
    └── hartUtils.ts            # 工具函数（等级映射等）
```

---

## 四、页面详细设计规范

### 页面 0：初始页（哈特沉睡空间）

#### 设计目标
营造神秘感和仪式感，建立情感连接的起点。

#### 布局结构
```
[纯黑背景 #000000]
├── 哈特形象（沉睡状态）
│   └── 位置：绝对居中（水平+垂直）
│   └── 尺寸：120×120px
│   └── 动画：极慢呼吸（1次/4秒）
└── 无任何其他UI元素
```

#### 视觉���节
- **背景**：纯黑 `#000000`，无任何渐变或纹理
- **哈特**：
  - 主体颜色：`#FF6B8B` 透明度 30%
  - 无光晕或极微弱光晕（半径 10px，透明度 10%）
  - 内部粒子��止或极缓慢飘动
  - 眼睛闭合
- **氛围**：静谧、安详，像是在等待被唤醒

#### 交互规则
| 交互方式 | 触发区域 | 反馈 | 结果 |
|---------|---------|------|------|
| **单击** | 整个屏幕 | 轻微触觉反馈 | 触发"苏醒动画"（2秒），然后过渡到页面A |
| **长按** | 整个屏幕 | 无 | 无响应（简化交互） |

#### 过渡动画（到页面A）
- 哈特苏醒动画（2秒）
- 背景从纯黑渐变到页面A的环境渐变色（0.5秒）
- 页面A的其他元素淡入（0.5秒，与背景同时）
- 总时长：2.5秒

---

### 页面 A：首页/准备页（元气世界大厅）

#### 设计目标
快速启动跑步，展示核心状态，情感化欢迎。

#### 布局结构
```
[顶部区域 - 60px安全区]
├── 状态栏信息（时间、电量）- 极小，透明度 60%
└── 设置图标（右上角）- 24×24px

[中心区域 - 屏幕中央 60%]
├── 哈特形象（常态/高能状态）
│   └── 尺寸：140×140px
│   └── 位置：屏幕中心偏上（垂直居中 -10%）
│   └── 点击响应区域：180×180px（大于视觉尺寸，方便点击）
├── 问候语
│   └── 位置：哈特正下方，间距 24px
│   └── 样式：Body Large，半透明白色气泡背景
│   └── 内容：AI生成，如"早上好，小明！准备好今天的挑战了吗？"

[数据卡片区 - 屏幕下方 1/3]
├── 数据毛玻璃卡片（可横向滑动）
│   ├── 本周累计里程
│   │   └── 主数据：Display级大字 + 单位
│   │   └── 进度环：圆环进度条，使用主色
│   ├── 连续打卡天数
│   │   └── 主数据：H1级 + 火焰图标
│   │   └── 次要信息：上次跑步时间
│   ├── 当前元气值
│   │   └── 主数据：H1级 + 数字
│   │   └── 视觉：小型哈特图标，颜色随元气值变化
│   └── 当前目标（新增）
│       └── 主数据：目标描述（如"本周跑步20KM"）
│       └── 进度条：目标完成进度
│       └── 点击：进入目标设置/管理

[底部区域 - 50px安全区]
├── 主CTA按钮："开始奔跑"
│   └── 样式：无边框，填充式，元气粉渐变
│   └── 尺寸：宽度 80%，高度 56px，圆角 28px
│   └── 位置：距底部安全区 24px
│   └── 动效：轻微脉动（scale 1.0 ↔ 1.02，2秒循环）
└── 次级入口
    ├── "历史记录" - 奖杯图标（左侧）
    └── "目标管理" - Target图标（左侧，历史记录旁）
    └── 位置：底部左侧，极简图标
```

#### 视觉细节

**背景**
- 基础色：`#0A0A0A`
- 环境渐变（根据时段）：
  - 晨跑：从 `#0A0A0A` 到 `#1A1520` (上到下)
  - 日间：从 `#0A0A0A` 到 `#151A1A`
  - 夜跑：从 `#0A0A0A` 到 `#1A1215`
  - 深夜：无渐变，纯 `#000000`

**哈特形象**
- 根据当前元气值展示对应状态（参见第三部分色彩状态映射）
- 默认循环动画：常态呼吸 + 浮动
- 点击区域视觉反馈：半透明圆形扩散波纹

**问候语气泡**
- 背景：`rgba(255, 255, 255, 0.08)` + `blur(10px)`
- 内边距：12px 横向，8px 纵向
- 圆角：12px
- 文字：18px，`#FFFFFF`，居中对齐
- 问候语示例：
  - "早上好，[昵称]！晨跑是开启美好一天的钥匙🌅"
  - "今天想去哪里探险？"
  - "感觉你能量满满！一起跑起来吧💪"

**数据卡片**
- 卡片背景：标准毛玻璃（参见2.5节）
- 卡片布局：横向排列3个小卡片，或纵向堆叠2个大卡片（可滑动）
- 内边距：20px
- 圆角：16px
- 间距：卡片间 12px

**每个数据卡片内部**
- 标题（Caption）：`#CCCCCC`，12px，位于顶部
- 主数据（Display/H1）：`#FFFFFF`，粗体，居中或左对齐
- 辅助数据（Body）：`#999999`，14px
- 可视化元素：
  - 圆环进度条：使用 recharts 或 SVG，主色填充，灰色底色
  - 趋势图标：小箭头（上升/下降）+ 百分比

**主CTA按钮："开始奔跑"**
- 背景：线性渐变 `linear-gradient(135deg, #FF6B8B 0%, #FF8FA3 100%)`
- 阴影：`0 8px 24px rgba(255, 107, 139, 0.35)`
- 文字：H3级，`#FFFFFF`，加粗
- Hover/按下状态：轻微缩小 (scale 0.98) + 阴影减弱
- 脉动动画：
  ```
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }
  animation: pulse 2s ease-in-out infinite;
  ```

**次级入口图标**
- 尺寸：32×32px
- 颜色：`#FFFFFF` 透明度 50%
- 点击后：透明度变为 100%，轻微放大 (scale 1.1)

**当前目标卡片**（新增）
- 背景：标准毛玻璃，如无目标则显示虚线边框
- 标题（Caption）："当前目标" + Target图标
- 内容：
  - **有目标时**：
    - 目标描述：Body (16px)，如"本周跑步 20 KM"
    - 进度条：横向条形进度，主色填充
    - 完成度：百分比数字，如"60% (12/20 KM)"
    - 剩余时间：Caption，如"还剩 3 天"
  - **无目标时**：
    - 提示文字："设定目标，让哈特陪你一起进步！"
    - AI建议图标（Sparkles）："让AI帮我设定"
- 点击响应：整个卡片可点击

#### 交互规则

| 交互方式 | 触发区域 | 反馈 | 结果 |
|---------|---------|------|------|
| **点击"开始奔跑"按钮** | 按钮区域 | 按钮缩小 (scale 0.95) + 触觉反馈 | 过渡到"页面A1：跑步模式选择页" |
| **点击哈特** | 哈特周围 180×180px | 哈特做"点击反馈动画" | 弹出元气值详情浮层 |
| **点击数据卡片** | 整个卡片区域 | 卡片轻微放大 (scale 1.03) | 展开显示该数据的详细信息和图表 |
| **点击"当前目标"卡片** | 整个卡片区域 | 卡片轻微放大 (scale 1.03) | 弹出目标设置/管理浮层 |
| **点击"设置"图标** | 右上角图标 | 图标旋转 90° | 进入设置页面 |
| **点击"历史记录"图标** | 左下角图标 | 图标跳动 | 进入历史跑步记录页面 |
| **点击"目标管理"图标** | 左下角图标 | 图标跳动 | 直接进入目标管理浮层 |

#### 元气值详情浮层设计

**触发**：点击首页的哈特

**浮层样式**
- 从屏幕底部滑入（0.4s ease-out）
- 背景：强毛玻璃（参见2.5节）
- 圆角：顶部 32px，底部 0px
- 内边距：24px
- 高度：屏幕的 60%

**内容结构**
```
[浮层头部]
├── 拖动条（Drag Indicator）- 居中，灰色小横条
├── 标题："我的元气值"- H2
└── 关闭按钮（X）- 右上角

[元气值展示区]
├── 大号元气值数字 - Display级，主色
├── 元气值等级描述 - Body，如"活力充沛"
└── 小型哈特图标 - 当前状态

[规则说明区]
├── 标题："元气值规则" - H3
├── 获取规则 - 可折叠卡片
│   ├── 完成跑步
│   ├── 连续打卡
│   └── 达成目标
├── 扣减规则 - 可折叠卡片
│   ├── 活力衰退
│   ├── 每日代谢
│   └── 未达目标
└── 优先级说明 - Caption
```

**交互**
- 向下滑动浮层：关闭浮层
- 点击关闭按钮：关闭浮层
- 点击规则卡片：展开/折叠详细说明

---

### 页面 A-Goal：目标设置/管理浮层（新增）

#### 设计目标
让用户轻松设定和管理跑步目标，结合AI智能推荐，提升目标完成率。

#### 触发方式
1. 点击首页"当前目标"卡片
2. 点击底部"目标管理"图标
3. 首次使用时，完成第一次跑步后自动弹出引导

#### 布局结构

```
[浮层头部]
├── 拖动条（Drag Indicator）
├── 标题："我的目标" - H2
├── 哈特小图标（40×36px，根据目标完成度显示状态）
└── 关闭按钮（X）

[主内容区 - 可滚动]
├── 当前目标卡片（如有）
│   ├── 目标类型标签（周目标/月目标/自定义）
│   ├── 目标描述
│   ├── 大号进度圆环（中心显示完成百分比）
│   ├── 详细进度数据
│   └── 操作按钮：编辑、删除
│
├── AI智能推荐区（展开/折叠）
│   ├── 标题："AI为你推荐" + Sparkles图标
│   ��── 推荐理由：基于历史数据和元气值
│   └── 3个推荐目标卡片（横向滑动）
│       ├── 推荐1："本周跑步 15 KM"
│       ├── 推荐2："连续打卡 7 天"
│       └── 推荐3："突破配速 5'30"
│
└── 快速创建区
    ├── 标题："创建新目标" - H3
    ├── 目标类型选择（Tab切换）
    │   ├── 距离目标
    │   ├── 时长目标
    │   ├── 频次目标
    │   └── 配速目标
    └── 对应表单（根据选择的类型显示）

[底部操作区]
├── "让AI帮我设定" - 次要按钮（有Sparkles图标）
└── "保存目标" - 主按钮（元气粉渐变）
```

#### 视觉设计详述

**浮层整体**
- 从屏幕底部滑入（0.4s ease-out）
- 背景：强毛玻璃 `rgba(26, 26, 26, 0.9)` + `blur(40px)`
- 圆角：顶部 32px，底部 0px
- 高度：屏幕的 75%
- 内边距：24px

**当前目标卡片**
- 背景：深色卡片 `#2A2A2A` + 轻微光晕
- 圆角：20px
- 内边距：24px
- 边框：根据完成度显示不同颜色
  - 未开始/进行中：`#4A90E2` 透明度 40%
  - 即将完成（>80%）：`#FF6B8B` 透明度 60%
  - 已完成：`#34C759` 透明度 80%

**进度圆环**
- 尺寸：140×140px
- 位置：卡片顶部居中
- 轨道颜色：`rgba(255, 255, 255, 0.1)`
- 进度颜色：根据完成度渐变
  - 0-50%：`#FF6B8B` → `#FF8FA3`
  - 50-80%：`#FF8FA3` → `#FFD700`
  - 80-100%：`#FFD700` → `#34C759`
- 中心显示：
  - 大号百分比：Display (48px)
  - 小字说明：Caption "已完成"
- 动画：进度从0递增到当前值（1.5s）

**详细进度数据**
```
当前：12.5 KM        目标：20 KM
剩余：7.5 KM         距截止：3天
```
- 布局：2×2 网格
- 样式：Caption (14px)，键为灰色，值为白色加粗

**操作按钮（编辑/删除）**
- 样式：小型文字按钮，无背景
- 颜色：编辑为蓝色，删除为红色（低透明度）
- 位置：卡片右下角，横向排列

**AI智能推荐区**

展开状态：
- 标题右侧有折叠/展开图标（ChevronDown/Up）
- 推荐理由气泡：
  - 背景：`rgba(74, 144, 226, 0.15)`
  - 文字：Body (16px)
  - 示例："根据你过去两周的表现，每周跑步15KM对你来说很合适！"
  
推荐目标卡片（横向滑动容器）：
- 每个卡片尺寸：宽度 85%，高度 160px
- 卡片间距：12px
- 卡片样式：
  - 背景：渐变色（根据目标类型）
    - 距离目标：`#FF6B8B` → `#FF8FA3`
    - 时长目标：`#4A90E2` → `#5BA3F5`
    - 频次目标：`#34C759` → `#5FD77E`
  - 圆角：16px
  - 内边距：20px
  - 微妙的背景纹理或图案
- 卡片内容：
  - 图标（32×32px）：根据目标类型
  - 目标描述（H3）："本周跑步 15 KM"
  - 难度标签："轻松达成" / "有挑战" / "需努力"
  - 预估元气值奖励："+12 元气值"
  - "选择"按钮（小型，半透明白色背景）
- 点击"选择"：自动填充到创建表单

**快速创建区**

目标类型 Tab 切换：
- 4个 Tab：距离、时长、频次、配速
- 样式：药丸型标签
- 未选中：`rgba(255, 255, 255, 0.1)` 背景
- 选中：主色渐变背景 + 白色文字
- 切换动画：背景滑动效果（使用 Motion layoutId）

表单内容（根据类型）：

**1. 距离目标表单**
```
├── 距离输入
│   ├── 数字输入框（大号，居中）
│   └── 单位切换（KM / 英里）
├── 时间范围选择
│   ├── 选项：本周 / 本月 / 自定义
│   └── 自定义：日期选择器
├── 预览区
│   └── "你的目标：在 X 天内跑步 Y KM"
└── 难度评估（AI自动）
    └── "根据你的历史数据，这个目标对你来说【合适】"
```

**2. 时长目标表单**
```
├── 时长输入
│   ├── 小时输入
│   └── 分钟输入
├── 时间范围选择
└── 预览区
```

**3. 频次目标表单**
```
├── 次数输入
│   └── "在 X 天内跑步 Y 次"
├── 时间范围选择
└── 预览区
```

**4. 配速目标表单**
```
├── 目标配速输入
│   ├── 分钟输入
│   └── 秒输入
│   └── 格式：5'30" / KM
├── 目标距离
│   └── "在 X KM 的跑步中保持此配速"
└── 预览区
```

**输入组件样式**
- 数字输入框：
  - 背景：`rgba(255, 255, 255, 0.05)`
  - 边框：`1px solid rgba(255, 255, 255, 0.15)`
  - 圆角：12px
  - 字号：H1 (48px) 用于主要数字
  - 文字居中
  - 聚焦时：边框变为主色
- 单位/范围选择：
  - 使用 Radio Group 或 Segmented Control
  - 样式同 Tab 切换

**难度评估区**
- 背景：根据难度显示不同颜色
  - 太简单：蓝色 `rgba(74, 144, 226, 0.15)`
  - 合适：绿色 `rgba(52, 199, 89, 0.15)`
  - 有挑战：橙色 `rgba(255, 149, 0, 0.15)`
  - 太困难：红色 `rgba(255, 59, 48, 0.15)`
- 图标：对应的表情或图标
- 文字：Body，给出具体建议

**底部操作区**

"让AI帮我设定"按钮：
- 样式：次要按钮，`rgba(255, 255, 255, 0.1)` 背景
- 文字：Body Large，白色
- 图标：Sparkles，放在文字左侧，带微妙闪烁动画
- 尺寸：宽度 48%，高度 48px
- 点击效果：触发AI推荐对话流程

"保存目标"按钮：
- 样式：主按钮，主色渐变
- 文字：Body Large，白色
- 尺寸：宽度 48%，高度 48px
- 位置：右侧
- 点击效果：
  1. 按钮显示加载动画（Spinner）
  2. 保存成功后，显示Success Toast："目标已设定！哈特期待和你一起完成！"
  3. 浮层关闭，回到首页
  4. 首页"当前目标"卡片更新
  5. 哈特做一个兴奋动画

#### AI辅助设定流程

**触发方式**：点击"让AI帮我设定"按钮

**对话流程**：

步骤1：AI询问（气泡形式）
```
哈特："让我来帮你设定一个合适的目标吧！✨
请告诉我，你希望侧重于哪方面？"
```
选项卡片（3个，横向排列）：
- "提升距离" - 图标：MapPin
- "增加频次" - 图标：Calendar
- "突破配速" - 图标：Zap

步骤2：AI分析历史数据（加载动画）
```
哈特："让我看看你之前的表现..."
[Loading动画 1-2秒]
```

步骤3：AI给出推荐（气泡 + 卡片）
```
哈特："根据你过去的表现，我建议..."

[推荐目标卡片]
本周跑步 18 KM
• 比你上周多 3 KM，循序渐进
• 预计可获得 +15 元气值
• 完成概率：85%

[两个按钮]
"采用这个目标"    "重新生成"
```

步骤4：确认与调整
- 用户点击"采用"：直接保存，关闭浮层
- 用户点击"重新生成"：AI给出另一个推荐
- 用户可以在推荐基础上微调数字

**AI推荐逻辑**（供开发参考）
1. 分析最近4周的跑步数据：
   - 平均每周距离
   - 平均每周频次
   - 平均配速
   - 完成率趋势
2. 计算推荐值：
   - 距离：上周平均 × 1.1 - 1.2
   - 频次：上周频次 + 1
   - 配速：当前平均配速 - 10秒
3. 评估难度：
   - 低于平均：太简单
   - 平均 × 1.0-1.15：合适
   - 平均 × 1.15-1.3：有挑战
   - 高于平均 × 1.3：太困难

#### 交互动画与反馈

**浮层进入**
- 从底部滑入（0.4s ease-out）
- 背景遮罩淡入（0.3s）
- 哈特小图标从顶部弹入（0.5s bounce）

**浮层关闭**
- 向下滑动 > 30% 高度：自动关闭
- 点击关闭按钮：向下滑出（0.3s ease-in）
- 点击背景遮罩：同上

**AI推荐卡片选择**
- 点击"选择"按钮：
  - 卡片放大并高亮（0.3s）
  - 其他卡片淡出
  - 数据填充到表单（逐项动画）
  - 自动滚动到表单区域

**保存成功**
- Toast 通知从顶部滑入
- 哈特在 Toast 中做庆祝动画（小尺寸）
- Toast 停留 2 秒后自动消失
- 同时浮层关闭

**目标完成时的特殊动画**
当用户完成一次跑步后，如果目标进度达到100%：
1. 总结页显示特殊的"目标达成"横幅
2. 哈特做超级庆祝动画（比普通庆祝更夸张）
3. 大量金色粒子爆发
4. 显示奖励："🎉 目标达成！ +20 元气值"
5. 自动跳转到设定新目标引导

#### 特殊状态设计

**无目标状态**（首次使用）
- 显示引导卡片：
  ```
  [大图标：Target + Sparkles]
  
  "设定目标，让跑步更有动力！"
  
  "有目标的跑步能让你获得额外元气值奖励，
  而且哈特会更健康哦！💪"
  
  [两个按钮]
  "让AI帮我设定"    "自己创建"
  ```

**目标过期未完成**
- 在当前目标卡片顶部显示红色横幅
- 文字："目标已过期，未能完成"
- 操作：
  - "延期" - 延长目标截止时间
  - "放弃" - 删除目标（会扣除元气值）
  - "查看总结" - 显示完成情况分析

**多个目标管理**（高级功能）
- 支持同时设定多个不同类型的目标
- 使用垂直卡片列表展示
- 每个卡片可独立管理
- 最多支持3个并行目标

---

### 页面 A1：跑步模式选择页

#### 设计目标
清晰区分两种跑步模式，快速引导用户开始跑步。

#### 布局结构
```
[顶部区域]
├── 返回按钮（左上角）- 箭头图标
└── 哈特形象（小尺寸，80×80px）
    └── 位置：顶部居中
    └── 状态：期待/准备姿态

[中心区域 - 双卡片布局]
├── 自由跑卡片
│   └── 占据左侧 48% 宽度（或上半部分）
└── 目的地跑卡片
    └── 占据右侧 48% 宽度（或下半部分）
```

#### 卡片设计规范

**通用样式**
- 尺寸：宽度 48% (左右排列) 或 100% (上下排列)，高度 65vh
- 圆角：24px
- 内边距：24px
- 间距：卡片间 16px（左右排列）或 24px（上下排列）

**自由跑卡片**
- **背景层**：
  - 基础：`#1A1A1A` + 标准毛玻璃
  - 动态效果：抽象粒子动画（使用 canvas 或 motion.div）
    - 100+ 个小圆点随机漂浮
    - 颜色：`#FF6B8B` 透明度 20-60%
    - 运动：缓慢无规则移动，循环
- **图标**：无限符号 ∞ 或自由飘带图标
  - 尺寸：64×64px
  - 颜色：渐变主色
  - 位置：卡片顶部 1/4 处居中
- **标题**："自由跑"
  - 字号：H2 (32px)
  - 颜色：`#FFFFFF`
  - 位置：图标下方 16px
- **副标题**："随心所欲，随时结束"
  - 字号：Body (16px)
  - 颜色：`#CCCCCC`
  - 位置：标题下方 8px
- **装饰元素**：
  - 卡片四角有微弱光晕效果
  - 鼠标悬停/长按时，粒子加速飘动

**目的地跑卡片**
- **背景层**：
  - 基础：`#1A1A1A` + 标准毛玻璃
  - 动态效果：抽象地图线条动画
    - 使用 SVG 绘制抽象道路网格
    - 颜色：`#4A90E2` 透明度 20-40%
    - 效果：线条沿路径流动发光（类似霓虹灯）
- **图标**：地图标记或旗帜图标
  - 尺寸：64×64px
  - 颜色：科技蓝渐变
  - 位置：卡片顶�� 1/4 处���中
- **标题**："目的地跑"
  - 字号：H2 (32px)
  - 颜色：`#FFFFFF`
  - 位置：图标下方 16px
- **副标题**："设定目标，探索路线"
  - 字号：Body (16px)
  - 颜色：`#CCCCCC`
  - 位置：标题下方 8px
- **装饰元素**：
  - 卡片边缘有流动光效
  - 鼠标悬停/长按时，地图线条加速流动

#### 交互规则

| 交互方式 | 触发区域 | 反馈 | 结果 |
|---------|---------|------|------|
| **点击自由跑卡片** | 整个卡片 | 卡片放大 (scale 1.05) + 发光 + 触觉反馈 | 直接过渡到"页面B：跑步中主界面"（无路线） |
| **点击目的地跑卡片** | 整个卡片 | 卡片放大 (scale 1.05) + 发光 + 触觉反馈 | 过渡到"目的地输入页" |
| **长按任一卡片** | 整个卡片 | 卡片轻微震动 | 显示该模式的更多说明（Tooltip） |
| **点击返回按钮** | 左上角 | 图标淡出 | 返回"页面A：首页" |

#### 过渡动画

**到"页面B"（自由跑）**
- 被选中的卡片放大至全屏（0.5s ease-in-out）
- 另一张卡片淡出（0.3s）
- 卡片背景融入地图界面（0.3s）
- 地图和数据元素淡入（0.4s）

**到"目的地输入页"**
- 两张卡片同时向上移出屏幕（0.4s）
- 输入界面从下方滑入（0.4s）

---

### 页面 A1-1：目的地输入页

#### 设计目标
快速输入目的地，支持语音和文字输入。

#### 布局结构
```
[顶部区域]
├── 返回按钮（左上角）
└── 哈特形象（思考状态，80×80px）
    └── 位置：顶部居中
    └── 动画：头顶三个点闪烁

[中心区域]
├── 标题："去哪里跑步？"
│   └── 字号：H1，位置：屏幕中心偏上
├── 输入框
│   └── 样式：无边框，底部一条线，毛玻璃背景
│   └── 占位符："输入目的地或地标名称"
│   └── 尺寸：宽度 80%，高度 56px
└── 快捷建议标签
    ├── "公园"
    ├── "环湖路线"
    └── "河滨步道"
    └── 样式：小药丸型标签，可点击

[底部区域]
├── 语音输入按钮（大圆形）
│   └── 图标：麦克风
│   └── 尺寸：72×72px，圆形
│   └── 颜色：主色渐变
└── 确认按钮："生成路线"
    └── 样式：与首页主CTA一致
```

#### 视觉细节

**输入框**
- 背景：`rgba(255, 255, 255, 0.05)`
- 底部边框：`2px solid #FFFFFF` 透明度 20%
- 聚焦时：边框变为主色，透明度 100%
- 文字：H3 (24px)，`#FFFFFF`

**快捷建议标签**
- 背景：`rgba(255, 255, 255, 0.1)`
- 圆角：20px（全圆角）
- 内边距：12px 横向，8px 纵向
- 文字：Body (16px)，`#FFFFFF`
- 布局：横向排���，自动换行
- 点击效果：背景变亮，填充主色

**语音输入按钮**
- 背景：主色渐变
- 阴影：`0 8px 24px rgba(255, 107, 139, 0.4)`
- 图标：麦克风，32×32px，`#FFFFFF`
- 点击后：脉动动画 + 周围声波扩散动画
- 语音录入中：按钮呼吸动画，外圈声波持续扩散

#### 交互规则

| 交互方式 | 触发区域 | 反馈 | 结果 |
|---------|---------|------|------|
| **输入文字** | 输入框 | 边框高亮 | 输入完成后，"生成路线"按钮激活 |
| **点击快捷标签** | 标签 | 标签高亮填充 | 自动填入输入框 |
| **点击语音按钮** | 圆形按钮 | 声波动画 + 触觉反馈 | 开始语音识别，识别完成后自动填入输入框 |
| **点击"生成路线"** | 按钮 | 按钮缩小 + 加载动画 | 过渡到"路线推荐页" |

---

### 页面 A1-2：路线推荐页

#### 设计目标
展示AI生成的路线，帮助用户快速选择。

#### 布局结构
```
[顶部区域]
├── 返回按钮（左上角）
└── 标题："为你推荐以下路线"
    └── 字号：H2

[中心区域 - 路线卡片列表]
├── 路线卡片 1（推荐）
├── 路线卡片 2
└── 路线卡片 3
    └── 垂直滚动列表

[哈特提示]
└── 位置：第一张卡片旁边
└── 气泡："路线一沿途绿树更多哦！🌳"
```

#### 路线卡片设计

**卡片尺寸**
- 宽度：90% 屏幕宽度
- 高度：200px（固定）
- 圆角：20px
- 间距：卡片间 16px

**卡片内容布局**
```
[左侧 - 路线简图]
├── 占据 40% 宽度
├── 背景：深灰 + 路线高亮
└── 样式：抽象化地图，显示关键路径

[右侧 - 路线信息]
├── 占据 60% 宽度
├── 路线名称 - H3，如"滨江绿道环线"
├── 预估距离 - Body，如"5.2 KM"，带跑步图标
├── 预估时长 - Body，如"约 30 分钟"，带时钟图标
├── 途径点 - Caption，如"经过：江滨公园、观景台"
└── 推荐标签（仅路线1）
    └── "最佳推荐" - 小标签，主色背景
```

**卡片样式**
- 背景：标准毛玻璃
- 边框：`1px solid rgba(255, 255, 255, 0.1)`
- 推荐卡片特殊处理：
  - 边框颜色：主色 `#FF6B8B` 透明度 60%
  - 外发光：`box-shadow: 0 0 20px rgba(255, 107, 139, 0.2)`

**路线简图样式**
- 使用 canvas 或 SVG 绘制
- 底图：深灰色 `#2A2A2A`
- 路线：主色 `#FF6B8B`，宽度 4px，带发光效果
- 起点：绿色圆点
- 终点：红色旗帜图标

#### 交互规则

| 交互方式 | 触发区域 | 反馈 | 结果 |
|---------|---------|------|------|
| **点击路线卡片** | 整个卡片 | 卡片放大 (scale 1.03) + 高亮 | 选中该路线，过渡到"页面B：跑步中主界面" |
| **长按路线卡片** | 整个卡片 | 轻微震动 | 展开显示路线详细信息（全屏地图预览） |
| **点击返回** | 左上角 | 图标淡出 | 返回"目的地输入页" |

---

### 页面 B：跑步中 - 主界面（沉浸模式）

#### 设计目标
**极致沉浸**，最小化UI干扰，手势交互为主，数据清晰可读。

#### 设计原则
1. **无边框按钮**：屏幕上没有任何明显的按钮框
2. **手势优先**：通过单击、双击、长按、滑动完成所有操作
3. **数据至上**：核心跑步数据永远清晰、大尺寸、高对比度
4. **动态地图**：地图自动跟随，无需手动操作
5. **AI陪伴感**：哈特始终在场，适时给予反馈

#### 布局结构（分层设计）

```
[第0层 - 地图底层]
└── 风格化动态地图（全屏）

[第1层 - 数据展示层]
├── 核心数据仪表盘（屏幕上半部）
│   ├── 用时（左上角）
│   ├── 距离（中央）
│   └── 配速（右上角）
└── 次级数据（可选，下滑显示）
    ├── 卡路里
    ├── 步频
    └── 心率（若支持）

[第2层 - AI交互层]
├── 哈特形象（左上角或右上角）
├── AI对话气泡（顶部，淡入淡出）
└── 导航指引条（需要时出现在数据下方）

[第3层 - 隐形交互层]
├── 屏幕上半部：双击触发鼓励
├── 屏幕下半部：长按呼出菜单
└── 左右滑动：切换音乐

[第4层 - 状态栏]
└── 时间、电量、语音状态（半透明）
```

#### 地图设计（第0层）

**地图样式**
- **风格**：深色主题，低饱和度
- **底色**：`#1A1A1A`（陆地），`#0D1F2D`（水域）
- **道路**：`#2A2A2A`（主路），`#242424`（辅路）
- **文字标签**：`#666666`，尺寸极小，不干扰视线
- **建筑物**：`#1F1F1F`，无轮廓线

**用户位置标记**
- **形态**：圆形光点
- **颜色**：主色 `#FF6B8B`
- **尺寸**：12px（核心圆点）+ 24px（外发光圈）
- **动画**：
  - 核心圆点：实心，不闪烁
  - 外圈：脉动动画（scale 1.0 ↔ 1.5，透明度 0.6 ↔ 0，2秒循环）
  - 移动时：后方带拖尾光晕（类似彗星）

**已跑路径**
- **颜色**：主色 `#FF6B8B`
- **宽度**：6px
- **样式**：圆角端点，带外发光
- **动画**：路径绘制时有流光效果（从起点到当前位置）

**规划路径（目的地跑模式）**
- **颜色**：科技蓝 `#4A90E2` 透明度 50%
- **宽度**：4px
- **样式**：虚线或点线，表示未完成
- **动画**：流动光点沿路径前进，指示方向

**地图行为**
- **自动跟随**：始终保持用户位置在屏幕中�����下（下方 40%），视野朝向前进方向
- **自动缩放**：根据速度调整缩放级别
  - 慢跑（<6 km/h）：较大缩放（zoom 17）
  - 快跑（6-10 km/h）：中等缩放（zoom 16）
  - 冲刺（>10 km/h）：较小缩放（zoom 15），看到更多前方路线
- **禁用交互**：用户无法手动拖动、缩放地图（保持沉浸）

#### 核心数据仪表盘（第1层）

**布局设计**
采用"三角形分散布局"，确保视觉平衡且不遮挡关键地图区域。

```
[用时]                    [配速]
左上角                     右上角

        [距离]
        中央偏上
```

**每个数据模块样式**

**距离（中央主数据）**
- **位置**：屏幕水平居中，距顶部 25%
- **背景**：强毛玻璃卡片
  - 尺寸：自适应内容，最小 160px 宽，80px 高
  - 圆角：24px
  - 背景：`rgba(26, 26, 26, 0.85)` + `blur(40px)`
  - 边框：`1px solid rgba(255, 255, 255, 0.15)`
- **数字**：
  - 字号：Display (72px)
  - 字体：SF Pro Rounded（更圆润亲和）
  - 颜色：`#FFFFFF`
  - 样式：Tabular Numbers（等宽）
- **单位**：
  - 字号：H3 (24px)
  - 颜色：`#CCCCCC`
  - 位置：数字右下角
- **装饰**：数字周围有微弱光晕（主色，透明度 10%）

**用时（左上角）**
- **位置**：距左边 24px，距顶部 80px（避开状态栏）
- **背景**：轻毛玻璃圆形
  - 尺寸：100×100px 圆形
  - 背景：`rgba(42, 42, 42, 0.6)` + `blur(20px)`
- **数字**：
  - 格式：00:00:00（时:分:秒）
  - 字号：Body Large (18px)
  - 颜色：`#FFFFFF`
  - 居中对齐
- **图标**：时钟图标（16×16px），位于数字上方

**配速（右上角）**
- **位置**：距右边 24px，距顶部 80px
- **背景**：轻毛玻璃圆形（同用时）
- **数字**：
  - 格式：5'30"（分'秒"/公里）
  - 字号：Body Large (18px)
  - 颜色：根据配速变化：
    - 快于目标：绿色 `#34C759`
    - 正常：白色 `#FFFFFF`
    - 慢于目标：橙色 `#FF9500`
- **图标**：闪电图标（16×16px），位于数字上方

**次级数据（下滑显示）**
- 默认隐藏
- 用户向下滑动屏幕上半部时，从顶部滑下一个横向毛玻璃条
- 显示：卡路里、步频、心率（图标+数字）
- 样式：极简，Caption (14px)
- 停留3秒后自动收起

#### AI交互层（第2层）

**哈特形象**
- **位置**：左上角，用时数据旁边，或右上角配速数据旁边（可配置）
- **尺寸**：60×60px（较小，不干扰）
- **状态**：
  - 常态：缓慢浮动
  - 用户加速：做出加油姿态
  - 用户减速：做出鼓励姿态
  - 语音输入中：声波扩散动画
- **交互**：点击哈特可触发快速鼓励或询问"需要帮助吗？"

**AI对话气泡**
- **位置**：屏幕顶部 20% 处，水平居中
- **触发时机**：
  - 每跑完 1km
  - 配速异常变化
  - 用户双击屏幕
  - 即将到达转弯点
- **样式**：
  - 背景：强毛玻璃 + 主色边框（1px）
  - 圆角：16px
  - 最大宽度：70% 屏幕宽
  - 内边距：16px 横，12px 纵
  - 文字：Body Large (18px)，`#FFFFFF`
- **动画**：
  - 入场：从上方滑入 + 淡入（0.4s）
  - 停留：3-5秒
  - 出场：向上滑出 + 淡出（0.3s）
- **内容示例**：
  - "太棒了！已经跑了 1 公里！💪"
  - "前方 200 米左转哦～"
  - "感觉累了吗？放慢节奏也没关系😊"
  - "你的配速比上次快了 10 秒！"

**导航指引条（仅目的地跑）**
- **位置**：屏幕上半部，距离数据下方 16px
- **触发**：距离转弯点 200 米内出现
- **样式**：
  - 背景：深色毛玻璃 `rgba(42, 42, 42, 0.9)`
  - 圆角：20px（全圆角，药丸型）
  - 内边距：12px 横，8px 纵
  - 边框：科技蓝 `#4A90E2` 1px
- **内容**：
  - 方向图标（左转/右转/直行）- 32×32px
  - 距离文字 - "200米后左转"
  - 布局：图标在左，文字在右
- **动画**：
  - 入场：从上方滑入
  - 距离倒计时：数字实时更新
  - 到达转弯点：指引条变绿并自动消失

#### 隐形交互层（第3层）

**设计理念**：整个屏幕是一个大型交互画布，无需可见按钮。

**交互区域定义**
```
[屏幕上半部 - 0% ~ 50%]
├── 单击：无响应（避免误触）
├── 双击：触发"急需鼓励"，哈特说鼓励的话
└── 下滑：显示次级数据条

[屏幕下半部 - 50% ~ 100%]
├── 左滑：切换到上一首音乐
├── 右滑：切换到下一首音乐
└── 长按（1.5秒）：呼出暂停/结束菜单
```

**交互反馈**

**双击（鼓励）**
- 触觉反馈：两次短震
- 视觉反馈：
  - 屏幕闪烁主色光晕（从点击位置扩散）
  - 哈特做"鼓励动画"（跳跃+挥手）
  - AI气泡出现："加油加油！你超棒的！💪"

**左右滑动（切歌）**
- 触觉反馈：滑动震动
- 视觉反馈：
  - 屏幕底部出现一个小型音乐卡片（0.5秒）
  - 显示：歌曲封面（圆形，48×48px）+ 歌名（Body）
  - 卡片从侧边滑入，停留，滑出
- 音乐控制：
  - 集成系统音乐播放器或 Spotify API
  - 左滑 = 上一首，右滑 = 下一首

**长按（呼出菜单）**
- 触觉反馈：长震（0.5秒）
- 视觉反馈：
  - 屏幕整体暗淡（overlay: `rgba(0, 0, 0, 0.5)`）
  - 从底部滑入菜单卡片（0.4s ease-out）

**暂停/结束菜单设计**

```
[菜单卡片]
├── 从屏幕底部弹出
├── 高度��自适应，约 30% 屏幕高
├── 圆角：顶部 32px，底部 0px
└── 背景：强毛玻璃

[菜单内容]
├── 拖动条（顶部居中）
├── 哈特形象（60×60px，居中）
├── 问题："要休息一下吗？"
├── 两个大按钮（垂直排列）
│   ├── "暂停跑步" - 次要按钮（灰色背景）
│   └── "结束跑步" - 主要按钮（主色背景）
└── 取消区域（点击卡片外或向下滑动）
```

**按钮样式**

**暂停跑步按钮**
- 背景：`rgba(255, 255, 255, 0.1)`
- 文字：`#FFFFFF`，H3
- 尺寸：宽度 80%，高度 56px
- 圆角：16px
- 图标：暂停图标（24×24px）
- 点击效果：背景变亮

**结束跑步按钮**
- 背景：主色渐变
- 文字：`#FFFFFF`，H3
- 尺寸：同上
- 图标：方块图标（24×24px）
- 点击效果：略微缩小

#### 状态栏（第4层）

**位置**：屏幕最顶部
**内容**：
- 左侧：当前时间（12:34）
- 右侧：电量（电池图标 + 百分比）
- 中间：语音状态图标（语音激活时显示声波图标）

**样式**：
- 背景：无（完全透明）
- 文字：Caption (14px)，`#FFFFFF` 透明度 50%
- 图标：20×20px，同样透明度

---

### 页面 C：跑步后 - 总结页

#### 设计目标
**成就感最大化**，庆祝完成，数据可视化，鼓励分享。

#### 布局结构

```
[背景层 - 艺术化路线图]
└── 使用本次跑步路线生成艺术图

[顶部庆祝区 - 30%]
├── 庆祝动画（礼花粒子）
├── 哈特形象（庆祝状态，大尺寸 120×120px）
├── AI祝贺语："你又一次超越了自己！🎉"
└── 核心成就徽章

[中部核心数据区 - 35%]
├── 总距离（超大Display）
├── 总时长（H1）
├── 平均配速（H1）
└── 三个数据横向排列

[元气值变化区 - 15%]
├── "+15 元气值" - 主色高亮
├── 哈特能量条动画（从旧值到新值）
└── 等级提升提示（如有）

[详细数据区 - 可滚动]
├── 配速曲线图
├── 海拔变化图（如有）
├── 心率区间图（如有）
└── 分段配速表

[底部操作区]
├── "分享成就" - 主按钮
├── "查看详情" - 次要按钮
└── "完成" - 文字按钮
```

#### 视觉设计详述

**背景艺术化路线图**
- **生成方式**：
  - 提取本次跑步路线GPS数据
  - 将路线渲染为发光线条（主色）
  - 地图背景深度模糊处理，接近黑色
  - 路线周围有光晕扩散效果
- **视觉效果**：类似抽象艺术画，线条流畅有美感
- **覆盖层**：半透明黑色遮罩（0.6透明度），确保前景内容可读

**庆祝动画（页面进入时触发）**
- **粒子系统**：
  - 从屏幕顶部或哈特位置爆发
  - 200+ 彩色粒子（主色+金色+白色）
  - 粒子下落，渐渐消失
  - 持续时间：3秒
- **音效**（可选）**：欢呼声或"叮"的一声

**哈特形象（庆祝状态）**
- **位置**：屏幕上方 1/3 处，居中
- **尺寸**：120×120px
- **动画序列**：
  - 从小到大弹入（scale 0 → 1.2 → 1.0，0.6s bounce）
  - 连续跳跃 3 次
  - 触角/肢体欢快挥舞
  - 表情：大笑 :D
  - 周围持续有小星星闪烁

**AI祝贺语气泡**
- **位置**：哈特下方 16px
- **样式**：强毛玻璃气泡，主色边框
- **内容**：AI生成的个性化祝贺语，例如：
  - "你又一次超越了自己！🎉"
  - "这是你本月最快的 5K！太厉害了！🏆"
  - "连续打卡 7 天，坚持就是胜利！💪"
  - "今天的配速稳定如教科书！👏"
- **动画**：打字机效果逐字显示（0.05s/字）

**核心成就徽章**
- **位置**：哈特右上角
- **样式**：圆形徽章，金色渐变
- **内容**：根据成就类型显示不同图标
  - 新纪录：奖杯图标
  - 完成目标：勾选图标
  - 里程碑：星星图标
- **尺寸**：48×48px
- **动画**：旋转飞入（1s）

**核心数据展示**

采用卡片式布局，三个大数据卡片横向排列。

**总距离卡片**
- **数字**：Display (72px)，`#FFFFFF`
- **单位**：H3 (24px)，`#CCCCCC`
- **图标**：路线图标（32×32px），主色
- **背景**：标准毛玻璃
- **尺寸**：宽度 30%，高度 120px
- **��画**：数字从 0 递增到实际值（1s，ease-out）

**总时长卡片** & **平均配速卡片**
- 样式同上，数据不同

**元气值变化区**

```
[元气值增长动画]
├── 左侧："+15" - 主色，H1，带脉动动画
├── 中间：元气值图标（哈特小图标）
└── 右侧："元气值" - Body

[哈特能量条]
├── 样式：横向进度条
├── 背景：`rgba(255, 255, 255, 0.1)`
├── 填充：主色渐变
├── 动画：从旧值平滑增长到新值（1.5s）
└── 尺寸：宽度 80%，高度 12px，圆角 6px
```

**等级提升提示**（如有）
- 条件：元气值跨越等级阈值
- 样式：闪光横幅，金色渐变背景
- 内容："🎊 恭喜升级！你的元气值达到 Lv.3"
- 位置：能量条上方
- 动画：从右侧滑入，停留 2s，淡出

**详细数据区（可滚动）**

该区域为垂直滚动容器，包含多个数据卡片。

**配速曲线图卡片**
- **标题**："配速变化"
- **图表**：使用 recharts LineChart
  - X轴：时间或距离
  - Y轴：配速（分/公里）
  - 线条颜色：主色
  - 填充渐变：主色到透明
  - 网格线：极淡灰色
- **样式**：标准毛玻璃卡片
- **尺寸**：宽度 90%，高度 200px

**海拔变化图卡片**（如有海拔数据）
- 类似配速曲线，使用 AreaChart
- 线条颜色：科技蓝

**心率区间图卡片**（如有心率数据）
- 使用 BarChart 显示不同心率区间的时长
- 颜色分区：
  - 热身区：蓝色
  - 燃脂区：绿色
  - 有氧区：黄色
  - 无氧区：橙色
  - 极限区：红色

**分段配速表**
- **样式**：表格式布局
- **列**：
  - 第1列：段数（"第1公里"、"第2公里"...）
  - 第2列：配速（"5'30""）
  - 第3列：趋势图标（上升/下降箭头）
- **高亮**：最快的一段用主色高亮

#### 底部操作按钮

**分享成就按钮（主CTA）**
- **样式**：
  - 背景：主色渐变
  - 文字：`#FFFFFF`，H3
  - 图标：分享图标（24×24px）
  - 尺寸：宽度 80%，高度 56px
  - 圆角：28px
  - 阴影：`0 8px 24px rgba(255, 107, 139, 0.4)`
- **位置**：距底部安全区 80px

**查看详情按钮（次要CTA）**
- **样式**：
  - 背景：`rgba(255, 255, 255, 0.1)`
  - 文字：`#FFFFFF`，Body Large
  - 无图标
  - 尺寸：宽度 80%，高度 48px
  - 圆角：24px
- **位置**：分享按钮上方 12px

**完成按钮**
- **样式**：纯文字按钮，无背景
- **文字**："完成"，Body，`#CCCCCC`
- **位置**：查看详情按钮上方 12px
- **点击**：返回首页

#### 分享卡片生成

**触发**：点击"分享成就"按钮

**生成逻辑**：
1. 系统自动生成一张精美的分享图片（1080×1920px）
2. 内容包含：
   - 背景：艺术化路线图（同页面背景）
   - 顶部：MovAIQ Logo + "元气跑伴"
   - 中部：核心数据（距离、时长、配速）+ 大字体
   - 哈特形象（庆祝状态）
   - AI祝贺语
   - 底部：日期 + 用户昵称
3. 预览：在模态框中显示预览
4. 操作：
   - "保存到相册" - 下载图片
   - "分享到..." - 调用系统分享菜单（微信、微博、Instagram等）
   - "取消" - 关闭预览

**分享预览模态框样式**
- 背景：深色遮罩 `rgba(0, 0, 0, 0.9)`
- 分享卡片：居中显示，带阴影
- 底部操作按钮：横向排列
- 支持手势：向下滑动关闭

---

## 五、动效与微交互规范

### 5.1 过渡动画

**页面切换**
- 通用原则：平滑、快速、有方向性
- 标准时长：0.3-0.5s
- 缓动函数：ease-in-out 或 cubic-bezier(0.4, 0.0, 0.2, 1)

**常见过渡类型**

| 场景 | 动画类型 | 时长 | 说明 |
|------|---------|------|------|
| 前进（进入子页面） | 从右滑入 | 0.4s | 新页面从右边进入，旧页面略微左移并淡出 |
| 返回（回到父页面） | 向右滑出 | 0.3s | 当前页面向右滑出，上一页面从左边显现 |
| 底部弹出（模态/菜单） | 从下滑入 | 0.4s | 卡片从底部滑入，背景遮罩淡入 |
| 关闭弹出 | 向下滑出 | 0.3s | 卡片向下滑出，遮罩淡出 |
| 淡入淡出（数据更新） | opacity变化 | 0.2s | 用于轻微内容变化 |
| 放大（卡片选择） | scale放大 | 0.5s | 被选中的卡片放大至全屏 |

### 5.2 按钮/交互反馈

**点击反馈**
- 视觉：轻微缩小（scale 0.95-0.98）
- 触觉：短震（10-20ms）
- 时长：按下 0.1s，释放 0.15s

**长按反馈**
- 视觉：周围扩散波纹 + 轻微放大（scale 1.05）
- 触觉：持续震动（0.5s）
- 进度：可选进度环，提示长按时长

**滑动反馈**
- 视觉：跟随手指移动的元素 + 方向指示
- 触觉：滑动开始和结束各一次短震
- 阻尼：滑动距离与手指移动比例 0.8:1（提供阻力感）

### 5.3 加载状态

**全屏加载**（路线生成时）
- 背景：深色遮罩
- 动画：哈特旋转跳跃 + 周围粒子旋转
- 文字："正在为你规划最佳路线..."
- 样式：居中，简洁

**局部加载**（数据刷新）
- 样式：小型圆形进度器（Spinner）
- 颜色：主色
- 位置：数据旁边
- 尺寸：20×20px

**骨架屏**（列表/卡片加载）
- 用于历史记录页、路线推荐页
- 样式：卡片形状的灰色占位块，带呼吸动画
- 颜色：`#2A2A2A` 到 `#363636` 渐变循环

### 5.4 数据变化动画

**数字递增**（总结页数据）
- 效果：数字从 0 快速递增到目标值
- 时长：0.8-1.5s（根据数值大小）
- 缓动：ease-out（开始快，结尾慢）

**进度条增长**（元气值、周目标）
- 效果：填充从左到右平滑增长
- 时长：1-1.5s
- 颜色：可使用渐变色增强视觉冲击
- 同时：显示百分比文字递增

**图表绘制**（配速曲线）
- 效果：线条从左到右逐步绘制
- 时长：1-2s
- 配合：数据点依次出现

### 5.5 粒子效果

**庆祝粒子**（总结页）
- 数量：200-300 个
- 颜色：主色 + 金色 + 白色，随机
- 尺寸：2-6px 圆形
- 运动：从中心爆发，向四周扩散，带重力下落
- 消失：距离中心一定距离后淡出
- 时长：2-3s

**呼吸光晕**（哈特周围）
- 效果：一圈圆形光晕，scale + opacity 循环变化
- 颜色：主色，低透明度
- 时长：2s 循环
- 范围：从哈特边缘到 1.5 倍半径

**拖尾粒子**（跑步中用户位置）
- 效果：位置标记后方生成小粒子，逐渐消失
- 颜色：主色
- 生成频率：每 0.1s 一个
- 生命周期：0.5-1s

---

## 六、响应式与适配

### 6.1 设备适配

**设计基准**
- 基准屏幕：iPhone 14 Pro（393×852pt，实际 1179×2556px）
- 支持设备：iPhone SE（小屏）到 iPhone 14 Pro Max（大屏）

**适配策略**

**小屏设备（iPhone SE，375×667pt）**
- 字号略微缩小（-2px）
- 卡片间距缩小（-4px）
- 哈特尺寸略微缩小（-20%）
- 数据仪表盘布局调整：三个数据可能改为竖向排列

**大屏设备（iPhone 14 Pro Max，430×932pt）**
- 利用额外空间展示更多内容
- 卡片可横向排列更多个
- 字号保持不变，增加间距

### 6.2 横屏模式

**支持页面**：跑步中页面（页面B）

**布局调整**
- 地图占据左侧 60%
- 数据仪表盘移至右侧 40%，纵向排列
- 哈特和气泡仍在地图上层

**其他页面**：建议锁定竖屏

### 6.3 暗黑模式

**已默认暗黑**：本设计全程采用深色主题，无需额外适配。

**可选浅色模式**（如需支持）：
- 背景反转：黑色变白色
- 文字反转：白色变黑色
- 主色保持不变
- 毛玻璃效果调整为浅色半透明

---

## 七、技术实现建议

### 7.1 技术栈

**前端框架**：React + TypeScript
**样式方案**：Tailwind CSS v4.0
**组件库**：Shadcn/ui（用于基础组件如对话框、表单等）
**图标库**：Lucide React
**动画库**：Motion (Framer Motion)
**图表库**：Recharts
**地图服务**：
- Mapbox GL JS（深色主题自定义样式）
- 或 Leaflet + 自定义暗色瓦片

### 7.2 组件拆分建议

**核心组件**
- `<Hart />` - 哈特形象组件，支持多种状态和动画
- `<GlassCard />` - 毛玻璃卡片组件，可配置透明度���模糊度
- `<DataDisplay />` - 数据展示组件（大数字+单位）
- `<RunningMap />` - 跑步地图组件，封装地图逻辑
- `<AISpeechBubble />` - AI对话气泡组件
- `<ParticleEffect />` - 粒子效果组件（Canvas 实现）

**页面组件**
- `<SplashScreen />` - 初始页（页面0）
- `<HomePage />` - 首页（页面A）
- `<ModeSelectionPage />` - 模式选择页（页面A1）
- `<RunningPage />` - 跑步中页面（页面B）
- `<SummaryPage />` - 总结页（页面C）

### 7.3 状态管理

**全局状态**
- 用户信息：昵称、元气值、累计里程、连续打卡天数
- 当前跑步数据：距离、时长、配速、路径点
- AI 对话历史
- 设置项：音乐开关、语音开关、单位制（公里/英里）

**状态管理方案**：
- 简单场景：React Context + useReducer
- 复杂场景：Zustand 或 Jotai

### 7.4 性能优化

**地图性能**
- 使用 WebGL 渲染（Mapbox GL）
- 路径点抽稀（跑步过程中每隔一定距离或时间记录一次）
- 避免频繁重绘，使用 requestAnimationFrame

**动画性能**
- 优先使用 CSS transforms（translateX/Y, scale）和 opacity，避免���发 layout
- 复杂粒子效果使用 Canvas 或 WebGL
- 使用 will-change 提示浏览器优化

**数据缓存**
- 历史跑步记录缓存到本地存储（IndexedDB）
- AI 对话缓存，避免重复请求

---

## 八、实现提示词总结

### 给 Figma Make 的完整提示词模板

```
请创建一个名为"元气跑伴(MovAIQ)"的AI跑步伙伴App界面设计，需包含以下页面和组件：

## 设计风格
- **深色主题**：纯黑背景 #000000，毛玻璃卡片效果
- **主色调**：元气粉 #FF6B8B（活力），科技蓝 #4A90E2（智能）
- **无边框设计**：极简，手势交互，沉浸感强
- **动效丰富**：心跳动画、粒子效果、平滑过渡
- **参考风格**：Apple Watch（数据清晰）+ Nike Run Club（激励感）+ Strava（专业）

## 核心角色：哈特 (Hart)
- **形态**：卡通化心脏形象（♥），Q版、圆润、有弹性
- **尺寸**：120×108px（黄金比例1.1:1）
- **面部**：简单的点状眼睛 + 弧线嘴巴，表情丰富
- **核心动画**：双节拍心跳（"咚-咚"节奏）
- **6个状态等级**（对应元气值0-100）：
  1. **Lv.5 元气爆棚（90-100）**：鲜红色，金色光晕，周围有音符，强力跳动
  2. **Lv.4 活力充沛（70-89）**：健康红色，粉色光晕，规律跳动
  3. **Lv.3 基础平稳（40-69）**：暗红色，微弱光晕，平缓跳动
  4. **Lv.2 元气不足（20-39）**：暗紫红色，表面有裂纹，微弱跳动
  5. **Lv.1 垂头丧气（1-19）**：灰暗色，头顶小乌云下雨，几乎不跳
  6. **Lv.0 病变濒危（0分）**：深灰黑色，厚重乌云+闪电+绷带，停止跳动

## 必须包含的页面

### 页面0：初始页
- 纯黑背景，中央是沉睡状态的哈特（小尺寸，暗淡）
- 极慢呼吸动画
- 点击任意处触发苏醒动画，过渡到首页

### 页面A：首页/准备页
- 背景：深色渐变（根据时段微调色温）
- 中央：大尺寸哈特形象（根据元气值显示状态），带呼吸和浮动动画
- 哈特下方：AI问候语气泡
- 下方：4个毛玻璃数据卡片（本周里程+进度环、连续打卡、元气值、当前目标）
- 底部：大型主CTA按钮"开始奔跑"（无边框，元气粉渐变，轻微脉动）
- 角落：极简图标入口（设置、历史、目标管理）

### 页面A-Goal：目标设置/管理浮层（新增）
- 从底部滑入的浮层，强毛玻璃背景
- 当前目标展示（大号进度圆环）
- AI智能推荐区（3个推荐目标卡片，横向滑动）
- 快速创建区（4种目标类型Tab：距离/时长/频次/配速）
- 底部操作："让AI帮我设定" + "保存目标"
- AI对话流程：询问侧重点 → 分析数据 → 给出推荐 → 确认

### 页面A1：跑��模式选择
- 两张大卡片：左侧"自由跑"，右侧"目的地跑"
- 自由跑卡片：粒子飘动背景，无限符号图标
- 目的地跑卡片：抽象地图线条流动背景，旗帜图标
- 顶部：小尺寸哈特（期待状态）

### 页面B：跑步中主界面（最重要）
- **底层**：深色风格化地图（全屏），用户位置为发光圆点，已跑路径为主色线条
- **数据层**：三个毛玻璃数据块分散在屏幕上方
  - 中央：距离（超大字号）
  - 左上：用时（圆形）
  - 右上：配速（圆形）
- **AI层**：
  - 角落小尺寸哈特，根据跑步状态有动作
  - AI对话气泡从顶部淡入淡出
  - 导航指引条（目的地跑时）
- **交互层**：完全无按钮
  - 双击屏幕上半部 → 哈特鼓励
  - 左右滑动下半部 → 切歌
  - 长按下半部 → 弹出暂停/结束菜单（底部弹出毛玻璃卡片）

### 页面C：跑步后总结页
- 背景：艺术化路线图（路径发光，地图模糊）
- 顶部：大尺寸哈特（庆祝动画，跳跃+粒子爆发）+ AI祝贺语
- 中部：三个核心数据（距离、时长、配速）大字体展示，数字递增动画
- 元气值增长区："+15元气值" + 能量条增长动画
- 下方可滚动：配速曲线图、分段数据表（使用 recharts）
- 底部：主按钮"分享成就"（元气粉渐变）

## 设计规范
- **圆角**：卡片 16-24px，按钮 28px，小元素 12px
- **间距**：基准 8px，常用 16px/24px/32px
- **字体**：SF Pro Display/Rounded，PingFang SC，数字使用等宽
- **毛玻璃**：`rgba(42, 42, 42, 0.7)` + `blur(20px)` + 细边框
- **阴影**：柔和，`0 8px 32px rgba(0, 0, 0, 0.37)`
- **动画时长**：快速反馈 0.1-0.2s，页面切换 0.3-0.5s，庆祝动画 2-3s

## 组件要求
- 使用 Motion (Framer Motion) 实现所有动画
- 使用 Lucide React 图标库
- 使用 Recharts 绘制图表
- 使用 Canvas 实现粒子效果
- 所有交互提供触觉反馈提示

## 特别强调（必须遵守）
1. **哈特形象**：必须是心脏形状（♥），Q版卡通风格，有眼睛和嘴巴，可爱不恐怖
2. **6个等级**：Lv.0到Lv.5每个等级的颜色、装饰都不同，务必准确实现
3. **装饰元素**：音符（Lv.5）、乌云+雨（Lv.1）、乌云+闪电+绷带（Lv.0）必须体现
4. **心跳动画**：双节拍"咚-咚"节奏，不同等级频率和幅度不同
5. **目标功能**：首页必须有"当前目标"卡片，点击弹出目标管理浮层，支持AI辅助设定
6. **跑步中页面**：务必极简，完全无边框按钮，手势交互
7. **数据可读性**：所有数据使用大字号、高对比度、等宽数字
8. **动画流畅性**：使用 Motion (Framer Motion)，确保60fps
9. **深色��题**：全程深色，哈特作为发光元素在深色背景下突出

请严格按照以上规范设计界面，特别注意哈特的心脏形象、6个等级状态和目标功能的完整实现。
```

---

## 九、附录

### 9.1 元气值详细规则（供开发参考）

#### 获取规则
1. **完成跑步基础奖励**：
   - 1km = 2 元气值
   - 5km = 12 元气值（额外奖励 +2）
   - 10km = 30 元气值（额外奖励 +10）

2. **连续打卡奖励**：
   - 连续3天：+5 元气值
   - 连续7天：+15 元气值
   - 连续30天：+50 元气值

3. **成就奖励**：
   - 首次完成5K：+10
   - 突破个人最佳配速：+8
   - 探索新路线：+5

#### 扣减规则
1. **活力衰退**：
   - 连续7天未跑步：第8天起每日 -2
   - 持续不运动：扣减递增（-2, -3, -4...），最多 -5/天

2. **每日代谢**：
   - 每日凌晨 0点扣除 1 元气值（模拟能量消耗）

3. **未达目标**：
   - 设定跑步计划未完成：扣除原定奖励值的 50%

#### 优先级
- 一天内仅触发一次扣减，优先级：未达目标 > 活力衰退 > 每日代谢

### 9.2 AI对话语录库示例

**鼓励语（按哈特等级）**
- **Lv.5**："你简直太棒了！我感觉自己要爆炸啦！🌟"
- **Lv.4**："感觉状态不错哦！让我们继续保持！💪"
- **Lv.3**："让我们一起跑起来吧～我准备好了！"
- **Lv.2**："好久没运动了...我有点担心你呢😟"
- **Lv.1**："我快要撑不住了...救救我😢"
- **Lv.0**："我...我需要你...（微弱的声音）"

**跑步中鼓励（通用）**
- "加油加油！你超棒的！💪"
- "坚持住，胜利就在前方！"
- "你的每一步都在超越昨天的自己！"
- "感觉累了吗？深呼吸，放慢节奏也没关系😊"
- "我能感觉到你的心跳，你很棒！❤️"

**里程碑**
- "太棒了！已经跑了 1 公里！我感觉又有活力了！🎉"
- "哇！3公里了！你真是个跑步小能手！"
- "距离目标只剩 500 米，冲鸭！我和你一起！🚀"

**配速反馈**
- "你的配速比上次快了 10 秒！我的心跳都加速了！"
- "保持这个��奏，你会刷新纪录的！"
- "慢一点也没关系，享受跑步的过程最重要~"

**路线导航**
- "前方 200 米左转哦～"
- "快到观景台了，准备好欣赏风景吧！"
- "这里的风景超美，要不要拍张照？📸"

**完成祝贺**
- "你又一次超越了自己！我感觉超棒！🎉"
- "这是你本月最快的 5K！太厉害了！我为你骄傲！🏆"
- "连续打卡 7 天，坚持就是胜利！我越来越健康了！💪"

**失望/提醒（当未完成目标）**
- "今天没完成也没关系，明天继续加油��"
- "我有点难过...但我相信你下次一定可以的！"
- "休息也是训练的一部分，但别忘了我哦😊"

**元气值变化提醒**
- 升级："哇！我升级了！谢谢你！✨"
- 降级："我好像变虚弱了...多陪陪我好吗？"
- 濒危警告："我真的快不行了...求求你动起来吧！😭"

### 9.3 色彩变量表（供 CSS Variables 使用）

```css
:root {
  /* 主色 */
  --color-primary: #FF6B8B;
  --color-primary-light: #FF8FA3;
  --color-secondary: #4A90E2;
  --color-secondary-light: #5BA3F5;
  
  /* 背景 */
  --color-bg-primary: #000000;
  --color-bg-secondary: #0A0A0A;
  --color-bg-tertiary: #1A1A1A;
  --color-bg-card: #2A2A2A;
  
  /* 文字 */
  --color-text-primary: #FFFFFF;
  --color-text-secondary: #CCCCCC;
  --color-text-tertiary: #999999;
  --color-text-disabled: #4D4D4D;
  
  /* 功能色 */
  --color-success: #34C759;
  --color-warning: #FF9500;
  --color-error: #FF3B30;
  --color-neutral: #8E8E93;
  
  /* 间距 */
  --spacing-xs: 8px;
  --spacing-sm: 16px;
  --spacing-md: 24px;
  --spacing-lg: 32px;
  --spacing-xl: 48px;
  
  /* 圆角 */
  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --radius-full: 9999px;
  
  /* 阴影 */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
  --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.25);
  --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.35);
  --shadow-glow: 0 0 20px rgba(255, 107, 139, 0.3);
}
```

---

## 十、验收清单

在完成设计后，请确保以下所有要点已实现：

### 视觉设计
- [ ] 所有页面采用深色主题
- [ ] 毛玻璃效果应用正确（背景模糊+半透明）
- [ ] 主色（元气粉）和次色（科技蓝）应用一致
- [ ] 字体层级清晰，大数据使用等宽数字
- [ ] 图标统一使用 Lucide React，线性风格

### 哈特角色（核心重点）
- [ ] 哈特采用心脏形象（♥），Q版圆润，不是医学解剖风格
- [ ] 6个等级状态完整实现（Lv.0 到 Lv.5）
- [ ] 每个等级的颜色、光晕、装饰元素准确：
  - [ ] Lv.5：鲜红色+金色光晕+音符环绕
  - [ ] Lv.4：健康红色+粉色光晕+偶尔光点
  - [ ] Lv.3：暗红色+微弱���晕+无装饰
  - [ ] Lv.2：暗紫红色+无光晕+裂纹
  - [ ] Lv.1：灰暗色+小乌云+下雨+裂纹
  - [ ] Lv.0：深灰黑+厚重乌云+闪电+绷带
- [ ] 双节拍心跳动画流畅（"咚-咚"节奏，不同等级频率不同）
- [ ] 面部表情系统（眼睛、嘴巴）可根据状态变化
- [ ] 6种特殊动画完整实现：
  - [ ] 苏醒动画（乌云消散+绷带解开+裂纹愈合）
  - [ ] 鼓励动画（跳跃+旋转+星星粒子）
  - [ ] 庆祝动画（连续跳跃+彩色粒子+升级到Lv.5）
  - [ ] 思考动画（头顶泡泡+三点闪���+左右摇摆）
  - [ ] 点击反馈（Squash & Stretch+波纹+眨眼）
  - [ ] 受伤动画（颜色变暗+出现裂纹+难过表情）
- [ ] 哈特整体可爱且与UI不违和，深色背景下有足够对比度

### 核心页面
- [ ] 初始页：纯黑+沉睡哈特，点击触发苏醒
- [ ] 首页：哈特居中，4个数据卡片（包含当前目标），主CTA按钮脉动
- [ ] 目标管理浮层：完整实现（见下方目标功能清单）
- [ ] 模式选择页：两张卡片，背景动效区分
- [ ] 跑步中页面：地图全屏，数据浮层，完全无边框按钮
- [ ] 总结页：艺术化路线背景，庆祝动画，数据图表

### 目标功能（新增重点）
- [ ] 首页有"当前目标"数据卡片（第4个卡片）
- [ ] 目标卡片显示：
  - [ ] 有目标时：目标描述+进度条+完成度百分比+剩余时间
  - [ ] 无目标时：引导文字+"让AI帮我设定"提示
- [ ] 底部有"目标管理"图标入口（Target图标）
- [ ] 点击目标卡片或图标弹出目标管理浮层
- [ ] 目标管理浮层完整包含：
  - [ ] 当前目标大号进度圆环（140×140px，根据完成度渐变色）
  - [ ] 详细进度数据（2×2网格布局）
  - [ ] 编辑和删除按钮
  - [ ] AI智能推荐区（可折叠）：
    - [ ] 推荐理由气泡
    - [ ] 3个推荐目标卡片（横向滑动）
    - [ ] 每个卡片显示：描述+难度标签+预估元气值+选择按钮
  - [ ] 快速创建区：
    - [ ] 4个Tab切换（距离/时长/频次/配速）
    - [ ] 对应输入表单（数字输入+单位+时间范围）
    - [ ] AI难度评估区（自动分析显示）
  - [ ] 底部2个按钮："让AI帮我设定" + "保存目标"
- [ ] AI辅助设定完整流程：
  - [ ] 步骤1：询问侧重点（3个选项卡片）
  - [ ] 步骤2：加载分析动画
  - [ ] 步骤3：推荐卡片（含预估元气值和完成概率）
  - [ ] 步骤4：采用/重新生成按钮
- [ ] 保存目标后：
  - [ ] 显示Success Toast通知
  - [ ] 哈特做兴奋动画
  - [ ] 首页目标卡片更新
- [ ] 目标完成时特殊效果：
  - [ ] 总结页显示"目标达成"金色横幅
  - [ ] 哈特超级庆祝动画（比普通更夸张）
  - [ ] 大量金色粒子
  - [ ] 显示额外元气值奖励

### 交互细节
- [ ] 所有按钮/卡片点击有缩放反馈
- [ ] 跑步中页面支持双击、滑动、长按手势
- [ ] 底部菜单从下方滑入，支持拖动关闭
- [ ] 元气值详情浮层点击哈特弹出
- [ ] 目标管理浮层支持向下滑动关闭
- [ ] 数字递增动画（总结页、目标进度）

### 动画效果
- [ ] 页面切换平滑（0.3-0.5s）
- [ ] 哈特有呼吸、浮动、跳跃动画
- [ ] 庆祝粒子效果（200+ 粒子，2-3s）
- [ ] AI气���淡入淡出
- [ ] 进度条增长动画

### 数据可视化
- [ ] 配速曲线图（使用 Recharts）
- [ ] 圆环进度条（周目标）
- [ ] 元气值能量条
- [ ] 分段配速表

### 响应式
- [ ] 小屏设备（375px）布局适配
- [ ] 大屏设备（430px）充分利用空间
- [ ] 横屏模式支持（跑步中页面）

---

**设计完成后，本文档即可作为开发团队的详细设计规范文档。**

祝项目顺利！🎉

# 元气跑伴 (MovAIQ)

一款情感化的AI跑步伙伴应用，核心设计理念是**沉浸感、情感化、无边界**。

## 🎯 项目特色

### 核心角色：哈特 (Hart)
- **形象**：Q版卡通心脏形象（♥），拟人化设计
- **6个等级状态**：根据元气值（0-100）动态变化
  - **Lv.5 元气爆棚** (90-100分)：鲜红色 + 金色光晕 + 音符环绕
  - **Lv.4 活力充沛** (70-89分)：健康红色 + 粉色光晕 + 偶尔光点
  - **Lv.3 基础平稳** (40-69分)：暗红色 + 微弱光晕
  - **Lv.2 元气不足** (20-39分)：暗紫红色 + 表面裂纹
  - **Lv.1 垂头丧气** (1-19分)：灰暗色 + 小乌云下雨
  - **Lv.0 病变濒危** (0分)：深灰黑 + 厚重乌云 + 闪电 + 绷带

### 核心动画：双节拍心跳
- 模拟真实心跳的\"咚-咚\"节奏
- 不同等级有不同的心跳频率和幅度
- 高等级（Lv.4-5）还有浮动动画和粒子效果

### 元气值系统
- **获取元气值**：完成跑步（每公里+5分）、连续打卡、达成目标
- **消耗元气值**：长期不运动会导致元气值衰减
- 元气值直接影响哈特的状态，激发用户保护欲
- 动态卡片样式：根据等级自动调整背景、边框、阴影
- Lv.4-5 有微光脉动效果和发光文字

### 目标管理功能
- **AI智能推荐**：基于历史数据推荐合适的目标
- **4种目标类型**：距离、时长、频次、配速
- **难度评估**：自动分析目标难度并给出建议
- **进度可视化**：大号圆环显示进度，渐变色表示完成度

### 成就系统
- **多类别成就**：速度、探索、距离、耐力、坚持等
- **12+种徽章设计**：每个成就有独特的图标和配色
- **进度追踪**：实时显示成就完成进度
- **解锁动画**：成就达成时有华丽的庆祝动画

### 社交分享
- **全屏沉浸式分享卡片**：点击分享后全屏展示
- **4:5竖版比例**：完美适配社交媒体（Instagram、微信朋友圈等）
- **高清PNG下载**：2倍分辨率确保清晰度
- **丰富内容**：包含跑步数据、路线可视化、哈特形象、元气值、成就徽章、AI语录

## 🎨 设计风格

- **深色主题**：纯黑背景 `#000000`，突出哈特发光效果
- **毛玻璃效果**：所有卡片采用 backdrop-blur 效果
- **主色调**：
  - 元气粉 `#FF6B8B`（活力、激励）
  - 科技蓝 `#4A90E2`（智能、专业）
- **动画流畅**：使用 Motion (Framer Motion) 确保 60fps
- **无边框设计**：极简界面，手势交互
- **一屏适配**：所有页面使用 `h-screen` 布局，无需整页滚动

## 📱 页面结构

### 1. 初始页 (InitialPage)
- 纯黑背景，沉睡的哈特（根据实际元气值显示对应等级）
- 点击任意处触发苏醒动画并进入首页

### 2. 首页/准备页 (HomePage)
- 中央：大尺寸哈特（根据元气值动态显示Lv.0-5状态）
- AI问候语气泡
- 4个数据卡片：本周里程、连续打卡、元气值、当前目标
- 元气值卡片带规则说明按钮（❓）
- 主CTA按钮：\"开始奔跑\"（带脉动动画）
- 右侧调试面板（测试不同元气值）

### 3. 目标管理 (GoalSheet)
- **全屏展示**：点击目标卡片后全屏打开
- 当前目标展示（进度圆环）
- AI智能推荐区（3个推荐卡片垂直列表）
- 快速创建区（4种目标类型Tab切换：距离、时长、频次、配速）
- AI辅助设定流程
- 难度评估和建议
- 底部固定操作按钮

### 4. 跑步模式选择
- 自由跑：粒子飘动背景，点击直接进入跑步
- 目的地跑：地图线条流动背景，点击进入目的地选择

### 5. 目的地输入页 (DestinationInputPage)
- AI智能推荐目的地（带距离和时间预估）
- 搜索附近地点功能
- 显示距离和预计时间
- 分类标签（推荐、历史、附近）
- 地点卡片横向滚动

### 6. 跑步中主界面 (RunningPage)
- 顶部导航地图模块（实时路径追踪、当前位置、剩余距离）
- 实时数据显示（距离、时间、配速、卡路里）
- 中央：哈特形象（根据元气值显示状态，带微弱心脏震颤动效（0.8秒周期，1→1.03→1缩放））
- 开始/暂停/结束控制按钮
- 数据详情面板（步数、步频、海拔、元气值）
- 哈特定时鼓励消息（每20秒）

### 7. 跑步后总结页 (SummaryPage)
- 顶部哈特庆祝动画（发光效果 + 浮动）
- 主要数据展示（距离、时间、配速、元气值等）
- 成就解锁提示（动态出现，带解锁动画）
- 哈特的鼓励话语
- 分享功能（全屏社交分享卡片）
- 完成按钮

### 8. 历史记录&成就墙 (HistoryPage)
- Tab切换：成就墙 / 跑步记录
- 成就徽章系统（速度、探索、距离、耐力、坚持等）
- 多分类筛选（全部、里程碑、环游各地、距离）
- 成就进度追踪和完成度展示
- 跑步记录历史列表（日期、距离、时长、配速、元气值）
- 总距离和总时长统计

### 9. 社交分享卡片 (ShareCard)
- 全屏沉浸式展示（黑色背景）
- 4:5竖版比例（适合社交媒体）
- 包含：跑步数据、路线可视化、哈特形象、元气值、成就徽章、AI语录
- 支持高清PNG下载（2x分辨率）
- 顶部操作按钮（下载/关闭）
- 底部提示信息

## 🛠 技术栈

- **React** + **TypeScript**
- **Motion (Framer Motion)** - 动画系统
- **Tailwind CSS v4.0** - 样式系统
- **Shadcn/ui** - UI组件库
- **Lucide React** - 图标
- **Canvas API** - 粒子效果
- **html2canvas** - 分享卡片截图生成

## 🎭 组件结构

```
/components
  /hart
    ├── Hart.tsx                  # 主组件
    ├── HartFace.tsx              # 表情系统
    ├── HartDecorations.tsx       # 装饰元素（乌云、闪电、音符）
    ├── HartParticles.tsx         # 粒子效果
    └── hartUtils.ts              # 工具函数
  ├── InitialPage.tsx             # 初始页（沉睡哈特）
  ├── HomePage.tsx                # 首页/准备页
  ├── DestinationInputPage.tsx    # 目的地输入页
  ├── RunningPage.tsx             # 跑步中主界面（含地图模块）
  ├── SummaryPage.tsx             # 跑步后总结页
  ├── HistoryPage.tsx             # 历史记录&成就墙
  ├── ShareCard.tsx               # 社交分享卡片（全屏）
  ├── GoalSheet.tsx               # 目标管理（全屏）
  ├── EnergyRulesDialog.tsx       # 元气值规则（全屏）
  ├── AchievementBadgeNew.tsx     # 成就徽章组件
  └── /ui                         # Shadcn UI组件
```

## ✅ 已实现功能

### 核心页面流程 ✅
1. **初始页** → 根据实际元气值显示对应等级的沉睡哈特，点击唤醒
2. **首页** → 元气世界大厅，数据卡片、目标管理、历史记录入口
3. **跑步模式选择** → 自由跑 / 目的地跑
4. **目的地输入页** → AI推荐、搜索、选择目的地（仅目的地跑）
5. **跑步中界面** → 地图导航、实时数据追踪、哈特鼓励、控制按钮
6. **跑步后总结** → 数据展示、成就解锁、庆祝动画、分享功能
7. **历史记录** → 成就墙、跑步记录、统计数据

### 哈特系统 ✅
- ✅ 6个等级状态 (Lv.0 - Lv.5)
- ✅ 根据元气值动态显示
- ✅ 双节拍心跳动画（可控制开关）
- ✅ 沉睡状态（初始页）与实际元气值一致
- ✅ 粒子效果和装饰元素（乌云、闪电、音符、绷带）
- ✅ 表情系统（开心、平静、担忧、难过、痛苦）

### 跑步功能 ✅
- ✅ 自由跑模式：点击直接开始
- ✅ 目的地跑模式：先选择目的地再开始
- ✅ 导航地图模块：实时路径追踪、当前位置标记、剩余距离
- ✅ 实时数据：距离、时间、配速、卡路里
- ✅ 暂停/继续/结束控制
- ✅ 哈特鼓励消息（每20秒）
- ✅ 数据详情面板（步数、步频、海拔、元气值）
- ✅ 跑步后总结页：庆祝动画、成就解锁、数据展示

### 成就系统 ✅
- ✅ 多类别成就：里程碑、地点打卡、距离、频次、速度、耐力
- ✅ 12+种成就徽章设计
- ✅ 成就进度追踪
- ✅ 解锁动画和视觉反馈
- ✅ 成就统计和完成度展示
- ✅ 统一配置��件管理（achievementConfig.ts）

### 历史记录 ✅
- ✅ 跑步记录列表（日期、距离、时长、配速）
- ✅ 总距离和总时长统计
- ✅ 元气值增益记录
- ✅ 成就墙展示
- ✅ Tab切换（成就/记录）

### 元气值系统 ✅
- ✅ 动态卡片样式（根据等级变化）
- ✅ Lv.4-5 发光特效和脉动动画
- ✅ 计分规则全屏展示（点击❓按钮）
- ✅ 详细的获取/消耗规则说明
- ✅ 跑步获取元气值（每公里+5）
- ✅ 调试面板（测试不同元气值效果）

### 社交分享 ✅
- ✅ 全屏沉浸式分享卡片
- ✅ 4:5竖版比例（适配社交媒体）
- ✅ 高清PNG下载（2x分辨率）
- ✅ 包含跑步数据、路线、哈特、元气值、成就、AI语录
- ✅ 顶部操作按钮
- ✅ 动态AI鼓励语生成

### 交互动画 ✅
- ✅ 流畅的页面切换动画
- ✅ 卡片横向滚动
- ✅ 按钮点击反馈
- ✅ 数据详情面板滑入滑出
- ✅ 成就解锁动画
- ✅ 哈特心跳和浮动动画

### 屏幕适配 ✅
- ✅ 所有页面使用 `h-screen` 布局
- ✅ 内容在一屏内显示，无需整页滚动
- ✅ 需要滚动的区域限制在特定内容区
- ✅ 响应式设计

## 🚀 快速开始

1. **启动应用**：初始页
   - 沉睡的哈特会根据当前元气值显示对应等级
   - 点击屏幕触发苏醒动画并进入首页

2. **探索首页**：
   - 中央大尺寸哈特根据元气值动态变化
   - 查看4个数据卡片（本周里程、连续打卡、元气值、当前目标）
   - 点击元气值卡片右上角 **❓** 全屏查看计分规则
   - 点击目标卡片全屏打开目标管理
   - 使用右侧调试器测试不同元气值效果

3. **体验跑步流程**：
   
   **方式一：自由跑**
   - 点击\"开始奔跑\" → 选择\"自由跑\"
   - 直接进入跑步界面
   - 点击播放按钮开始跑步
   - 实时查看距离、时间、配速、卡路里
   - 点击\"数据详情\"查看心率、步频等
   - 点击结束按钮完成
   
   **方式二：目的地跑**
   - 点击\"开始奔跑\" → 选择\"目的地跑\"
   - 进入目的地选择页面
   - 查看AI推荐或搜索地点
   - 选择目的地并点击\"开始导航\"
   - 进入跑步界面开始导航跑步

4. **目标管理**：
   - 点击\"当前目标\"卡片
   - 查看AI推荐目标
   - 创建自定义目标

5. **查看历史**：
   - 点击首页底部\"历史记录\"
   - 切换\"成就墙\"和\"跑步记录\"
   - 查看成就进度和历史数据

6. **分享成就**：
   - 跑步结束后点击\"分享\"按钮
   - 全屏查看精美的分享卡片
   - 点击下载按钮保存为PNG图片
   - 分享到社交媒体

## 💡 设���亮点

1. **情感化设计**：
   - 哈特的状态变化会激发用户的保护欲和责任感
   - 6个等级形态，每个都有独特的视觉效果
   - 通过拟人化表情和动画增强情感连接

2. **AI深度集成**：
   - 不只是目标设定，还有智能推荐和难度评估
   - AI根据历史数据生成个性化建议
   - 智能鼓励语，让跑步体验更温暖

3. **视觉反馈丰富**：
   - 每个交互都有细腻的动画反馈
   - Motion动画确保60fps流畅体验
   - 微妙的过渡和变化提升整体质感

4. **沉浸式体验**：
   - 极简界面，完全无边框按钮设计
   - 深色主题配合毛玻璃效果
   - 减少界面干扰，专注跑步本身

5. **双节拍心跳**：
   - 真实的"咚-咚"心跳节奏
   - 不同等级有不同的心跳频率和幅度
   - 增强代入感和沉浸感

6. **动态元气值卡片**：
   - 根据元气值等级自动调整卡片样式（背景、边框、阴影）
   - Lv.4-5 有微光脉动效果和发光文字
   - 右上角问号按钮快速查看计分规则
   - 一键了解如何获取/消耗元气值

7. **全屏功能展示**：
   - 元气值规则、目标管理、分享卡片均支持全屏展示
   - 沉浸式体验，专注内容
   - 统一的交互模式：点击外部关闭

## 📖 文档

- **设计规范**：`MovAIQ_Design_Brief_Optimized.md` - 完整的设计系统和规范
- **开发指南**：`guidelines/Guidelines.md` - 开发规范和最佳实践
- **成就系统**：`utils/achievementREADME.md` - 成就系统使用指南
- **分享卡片**：`components/ShareCardREADME.md` - 分享功能说明

## 🎨 色彩系统

```css
/* 主色 */
--color-primary: #FF6B8B;        /* 元气粉 */
--color-secondary: #4A90E2;      /* 科技蓝 */

/* 哈特等级色彩 */
Lv.5: #FF2D55 → #FF6B8B (鲜红渐变)
Lv.4: #FF3B30 → #FF6B8B (健康红)
Lv.3: #C7233A (暗红)
Lv.2: #8B1A1A (暗紫红)
Lv.1: #4A2424 (灰暗)
Lv.0: #2C2C2C (深灰黑)

/* 功能色 */
--color-success: #34C759;
--color-warning: #FF9500;
--color-error: #FF3B30;
```

---

**MovAIQ** - 让跑步成为一场情感化的陪伴之旅 💪❤️
